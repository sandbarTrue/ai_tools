(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2211:function(e,t,s){Promise.resolve().then(s.bind(s,1658))},1658:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var l=s(7437),a=s(2265),n=s(2099),r=s(7764),d=s(3705),i=s(7648);function c(e){if(!e)return 0;let t=new Date(e);return isNaN(t.getTime())?new Date(e.replace(/[+-]\d{2}:\d{2}$/,"")).getTime()-288e5:t.getTime()}function o(e,t){if(!e)return"—";let s=c(e),l=t-s;if(l<0||isNaN(l)||0===s)return"刚刚";let a=Math.floor(l/6e4);return a<1?"刚刚":a<60?"".concat(a," 分钟前"):"".concat(Math.floor(a/60)," 小时前")}function x(e){var t;let{stats:s,isLive:n}=e,[r,d]=(0,a.useState)(()=>Date.now());(0,a.useEffect)(()=>{let e=setInterval(()=>d(Date.now()),3e4);return()=>clearInterval(e)},[]);let x=null==s?void 0:s.wali_status,u=(null==s?void 0:s.active_tasks)||[],p=u.length>0?u:x&&"idle"!==x.status?[{id:"wali-current",task:x.currentTask||"未知任务",executor:x.executor,model:(t=x.executor)?t.includes("Opus")?"Claude Opus 4.6":t.includes("GLM-5")?"GLM-5":t.includes("GLM-4")?"GLM-4":"":"",status:"working"===x.status?"running":"investigating"===x.status?"blocked":"blocked"===x.status?"blocked":"stale",startedAt:x.startedAt}]:[],m=(null==x?void 0:x.queue)||[],h=(null==x?void 0:x.recentActions)||[],g=null==x?void 0:x.lastUpdate,b=(null==x?void 0:x.taskProgress)||(null==s?void 0:s.task_progress);return n||0!==p.length?0===p.length?(0,l.jsxs)("div",{className:"relative border border-gray-700 bg-gray-800/50 rounded-xl overflow-hidden",children:[(0,l.jsx)("div",{className:"h-1 bg-blue-500"}),(0,l.jsxs)("div",{className:"p-4 sm:p-6 flex items-center gap-2 text-gray-400",children:[(0,l.jsx)("span",{className:"text-lg",children:"\uD83E\uDD16"}),(0,l.jsx)("span",{className:"font-medium",children:"瓦力待命中"}),(0,l.jsx)("span",{className:"relative flex h-3 w-3 shrink-0 ml-1",children:(0,l.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-blue-400"})}),g&&(0,l.jsxs)("span",{className:"text-[11px] text-gray-500 ml-auto",children:[o(g,r),"更新"]})]})]}):(0,l.jsx)("div",{className:"space-y-3",children:p.map((e,t)=>{let s=function(e){switch(e){case"running":case"working":return{dot:"bg-green-400",bar:"bg-green-500",label:"运行中",pulse:!0};case"stale":return{dot:"bg-yellow-400",bar:"bg-yellow-500",label:"无响应",pulse:!1};case"blocked":case"investigating":return{dot:"bg-red-400",bar:"bg-red-500",label:"卡住",pulse:!0};case"completed":return{dot:"bg-gray-400",bar:"bg-gray-500",label:"已完成",pulse:!1};case"idle":return{dot:"bg-blue-400",bar:"bg-blue-500",label:"空闲",pulse:!1};default:return{dot:"bg-gray-400",bar:"bg-gray-500",label:"待命",pulse:!1}}}(e.status);return(0,l.jsxs)("div",{className:"relative border border-gray-700 bg-gray-800/50 rounded-xl overflow-hidden",children:[(0,l.jsx)("div",{className:"h-1 ".concat(s.bar)}),(0,l.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap min-w-0",children:[(0,l.jsx)("span",{className:"text-lg sm:text-xl",children:"\uD83E\uDD16"}),(0,l.jsx)("h2",{className:"text-base sm:text-lg font-bold text-white truncate",children:e.task}),(0,l.jsxs)("span",{className:"relative flex h-3 w-3 shrink-0",children:[s.pulse&&(0,l.jsx)("span",{className:"animate-pulse absolute inline-flex h-full w-full rounded-full ".concat(s.dot," opacity-75")}),(0,l.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 ".concat(s.dot)})]}),(0,l.jsx)("span",{className:"text-xs text-gray-400 bg-gray-700/50 px-2 py-0.5 rounded-full",children:s.label})]}),(0,l.jsxs)("span",{className:"text-[11px] text-gray-500 whitespace-nowrap shrink-0",children:[o(g||e.startedAt,r),"更新"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-3",children:[e.executor&&(0,l.jsxs)("span",{className:"text-xs text-purple-400 bg-purple-500/10 px-2 py-0.5 rounded-full border border-purple-500/20",children:["⚙️ ",e.executor]}),e.model&&(0,l.jsxs)("span",{className:"text-xs text-cyan-400 bg-cyan-500/10 px-2 py-0.5 rounded-full border border-cyan-500/20",children:["\uD83E\uDDE0 ",e.model]})]}),e.startedAt&&(0,l.jsxs)("div",{className:"text-sm text-gray-400 mb-4",children:["⏱ 已进行 ",(0,l.jsx)("span",{className:"text-white font-medium",children:function(e,t){if(!e)return"—";let s=c(e),l=t-s;if(l<0||isNaN(l)||0===s)return"刚刚开始";let a=Math.floor(l/6e4);if(a<1)return"不到 1 分钟";if(a<60)return"".concat(a," 分钟");let n=Math.floor(a/60),r=a%60;return r>0?"".concat(n," 小时 ").concat(r," 分钟"):"".concat(n," 小时")}(e.startedAt,r)})]}),(0,l.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row gap-4",children:[m.length>0&&(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("h3",{className:"text-[11px] text-gray-500 uppercase tracking-wider mb-2",children:["\uD83D\uDCCB 待办队列 (",m.length,")"]}),(0,l.jsxs)("div",{className:"space-y-2",children:[m.slice(0,3).map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-900/50 rounded-lg border border-gray-700/50",children:[(0,l.jsx)("span",{className:"text-[11px] text-gray-400 truncate flex-1",children:e.task}),e.executor&&(0,l.jsx)("span",{className:"text-[10px] text-purple-300 bg-purple-500/10 px-1.5 py-0.5 rounded",children:e.executor}),e.status&&(0,l.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded border ".concat(function(e){switch(e){case"进行中":return"bg-green-500/15 text-green-400 border-green-500/30";case"计划中":return"bg-yellow-500/15 text-yellow-400 border-yellow-500/30";default:return"bg-gray-500/15 text-gray-400 border-gray-500/30"}}(e.status)),children:e.status})]},t)),m.length>3&&(0,l.jsxs)("div",{className:"text-[10px] text-gray-500 text-center",children:["+",m.length-3," 更多"]})]})]}),b&&(0,l.jsxs)("div",{className:m.length>0?"sm:w-48 shrink-0":"flex-1",children:[(0,l.jsx)("h3",{className:"text-[11px] text-gray-500 uppercase tracking-wider mb-2",children:"\uD83D\uDCCA 任务进度"}),(0,l.jsxs)("div",{className:"p-3 bg-gray-900/50 rounded-lg border border-gray-700/50",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"总进度"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-green-400",children:[b.percentage.toFixed(0),"%"]})]}),(0,l.jsx)("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden mb-2",children:(0,l.jsx)("div",{className:"h-2 bg-gradient-to-r from-green-500 to-cyan-500 rounded-full transition-all duration-700",style:{width:"".concat(b.percentage,"%")}})}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-[11px] text-gray-400",children:["已完成 ",(0,l.jsx)("span",{className:"text-white font-medium",children:b.completed})," / ",b.total]}),(0,l.jsx)(i.default,{href:"/dashboard/tasks/",className:"text-[11px] text-blue-400 hover:text-blue-300 transition-colors",children:"查看详情 →"})]})]})]})]}),h.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-[11px] text-gray-500 uppercase tracking-wider mb-2",children:"\uD83D\uDCDC 最近操作"}),(0,l.jsx)("div",{className:"space-y-1.5",children:h.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,l.jsx)("span",{className:"text-[10px] text-gray-500 font-mono w-10 shrink-0",children:e.time}),(0,l.jsx)("span",{className:"truncate flex-1",children:function(e){if(!e)return null;if(e.startsWith("$"))return(0,l.jsx)("span",{className:"font-mono text-green-400",children:e});for(let t of["编辑","写入","读取"])if(e.startsWith(t)){let s=e.slice(t.length),a=s.match(/^[\s:"]*([^\s"]+)[\s"]*(.*)$/);if(a){let[,e,s]=a;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-gray-400",children:t}),(0,l.jsx)("span",{className:"text-blue-400",children:e}),s&&(0,l.jsx)("span",{className:"text-gray-400",children:s})]})}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-gray-400",children:t}),(0,l.jsx)("span",{className:"text-blue-400",children:s})]})}return(0,l.jsx)("span",{className:"text-gray-300",children:e})}(e.action)}),e.executor&&(0,l.jsx)("span",{className:"text-[10px] text-purple-300 bg-purple-500/10 px-1.5 py-0.5 rounded shrink-0",children:e.executor}),e.tokens&&(0,l.jsx)("span",{className:"text-[10px] text-cyan-300 shrink-0",children:e.tokens})]},t))})]}),e.logTail&&(0,l.jsxs)("div",{className:"mt-3 p-3 bg-[#0d1117] rounded-lg border border-[#21262d]",children:[(0,l.jsx)("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"最近日志"}),(0,l.jsx)("pre",{className:"text-xs text-gray-400 font-mono whitespace-pre-wrap overflow-hidden max-h-20",children:e.logTail})]})]})]},e.id||t)})}):null}let u={"in-progress":{color:"text-blue-400",label:"进行中",bg:"bg-blue-500/10 border-blue-500/20"},planned:{color:"text-yellow-400",label:"计划中",bg:"bg-yellow-500/10 border-yellow-500/20"},blocked:{color:"text-red-400",label:"阻塞",bg:"bg-red-500/10 border-red-500/20"},done:{color:"text-green-400",label:"已完成",bg:"bg-green-500/10 border-green-500/20"}},p={高:{color:"text-red-400",label:"\uD83D\uDD34"},中:{color:"text-yellow-400",label:"\uD83D\uDFE1"},低:{color:"text-gray-400",label:"\uD83D\uDFE2"}};function m(e){let{tasks:t,showBlockedOnly:s=!1,maxItems:a=10}=e,r=t.filter(e=>"done"!==e.status&&!e.archived).filter(e=>!s||"blocked"===e.status).sort((e,t)=>{let s={"in-progress":0,blocked:1,planned:2,done:3},l=s[e.status]-s[t.status];if(0!==l)return l;let a={高:0,中:1,低:2};return a[e.priority]-a[t.priority]}).slice(0,a),d=t.filter(e=>"blocked"===e.status&&!e.archived).length,i=t.filter(e=>"in-progress"===e.status&&!e.archived).length,c=t.filter(e=>"planned"===e.status&&!e.archived).length;return 0===r.length?(0,l.jsxs)(n.Z,{hover:!1,children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"\uD83D\uDCCB 任务队列"}),(0,l.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,l.jsx)("span",{className:"text-3xl",children:"✅"}),(0,l.jsx)("p",{className:"mt-2",children:"所有任务已完成，暂无待办"})]})]}):(0,l.jsxs)(n.Z,{hover:!1,children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white",children:"\uD83D\uDCCB 任务队列"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[i>0&&(0,l.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-400 border border-blue-500/20",children:[i," 进行中"]}),d>0&&(0,l.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-red-500/10 text-red-400 border border-red-500/20",children:[d," 阻塞"]}),c>0&&(0,l.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-yellow-500/10 text-yellow-400 border border-yellow-500/20",children:[c," 计划"]})]})]}),(0,l.jsx)("ol",{className:"space-y-2",children:r.map((e,t)=>{let s=u[e.status],a=p[e.priority]||p["中"];return(0,l.jsxs)("li",{className:"flex items-start gap-2 text-sm p-2 rounded-lg ".concat("blocked"===e.status?"bg-red-500/5 border border-red-500/10":""),children:[(0,l.jsxs)("span",{className:"text-gray-500 font-mono text-xs mt-0.5 shrink-0",children:[t+1,"."]}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,l.jsx)("span",{className:"".concat("blocked"===e.status?"text-red-300":"text-gray-300"," truncate"),children:e.title}),(0,l.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded border ".concat(s.bg),children:s.label}),(0,l.jsx)("span",{className:"text-[10px]",title:e.priority,children:a.label})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mt-1",children:[e.executor&&(0,l.jsxs)("span",{className:"text-[10px] text-purple-400 bg-purple-500/10 px-1.5 py-0.5 rounded border border-purple-500/20",children:["\uD83D\uDC64 ",e.executor]}),e.model&&(0,l.jsxs)("span",{className:"text-[10px] text-gray-500",children:["\uD83E\uDDE0 ",e.model]}),e.openspecChange&&(0,l.jsxs)("span",{className:"text-[10px] text-blue-400 bg-blue-500/10 px-1.5 py-0.5 rounded border border-blue-500/20",children:["OpenSpec: ",e.openspecChange]})]})]})]},e.id)})}),d>0&&(0,l.jsx)("div",{className:"mt-4 p-3 bg-red-500/5 border border-red-500/20 rounded-lg",children:(0,l.jsxs)("div",{className:"text-xs text-red-400 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"⚠️"}),(0,l.jsxs)("span",{children:["有 ",d," 个任务被阻塞，需要关注"]})]})})]})}var h=s(3180);function g(e){return e>=1e3?"$"+(e/1e3).toFixed(1)+"K":e>=1?"$"+e.toFixed(2):e>0?"$"+e.toFixed(4):"$0"}function b(e){let{models:t,isLive:s}=e,a=t.reduce((e,t)=>e+(t._costToday||0),0),r=t.reduce((e,t)=>e+(t._costWeek||0),0),d=t.reduce((e,t)=>e+(t._costMonth||t._cost||0),0),i=t.reduce((e,t)=>e+t.tokensUsedToday,0),c=t.reduce((e,t)=>e+t.tokensUsedWeek,0),o=t.reduce((e,t)=>e+t.tokensUsedMonth,0),x=t.reduce((e,t)=>e+(t._callsToday||0),0),u=t.reduce((e,t)=>e+(t._callsMonth||t._calls||0),0),p=d/30,m=new Date().getDate(),h=[{label:"今日",cost:a,tokens:i,calls:x,color:"text-green-400",bg:"border-green-500/20"},{label:"本周",cost:r,tokens:c,calls:null,color:"text-blue-400",bg:"border-blue-500/20"},{label:"本月",cost:d,tokens:o,calls:u,color:"text-purple-400",bg:"border-purple-500/20"}];return(0,l.jsxs)(n.Z,{hover:!1,children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white",children:"\uD83D\uDCB0 费用统计"}),s&&p>0&&(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["日均 ~",g(p)," \xb7 预计本月 ",g(m>0?d/m*30:d)]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:h.map(e=>{var t;return(0,l.jsxs)("div",{className:"text-center p-4 bg-[#0d1117] rounded-lg border ".concat(e.bg),children:[(0,l.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:e.label}),(0,l.jsx)("div",{className:"text-3xl font-bold ".concat(e.color),children:g(e.cost)}),null!==e.calls&&e.calls>0&&(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[e.calls.toLocaleString()," 次调用"]}),(0,l.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[(t=e.tokens)>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()," tokens"]})]},e.label)})}),(0,l.jsxs)("div",{className:"mt-4 text-xs text-gray-600",children:["\uD83D\uDCA1 ",s?"费用数据基于 OpenClaw 会话和 Claude Code hooks 的真实 token 使用量计算":"仅 Claude Opus 4.6 产生费用，其余模型使用免费额度"]})]})}var v=s(5272),j=s(5940),N=s(1837),f=s(7899);function y(e){let{stats:t,isLive:s}=e,[d,i]=(0,a.useState)(()=>Date.now());if((0,a.useEffect)(()=>{let e=setInterval(()=>i(Date.now()),3e4);return()=>clearInterval(e)},[]),!s||!t)return null;let c=t.wali_status,o=t.active_tasks||[],x=(null==c?void 0:c.recentActions)||[],u=t.sessions;return 0!==o.length||0!==x.length||u&&0!==u.today?(0,l.jsxs)(n.Z,{hover:!1,children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white",children:"\uD83C\uDFAF 活跃任务快览"}),(0,l.jsx)("span",{className:"text-[11px] text-[#6e7681]",children:t.generated_at&&"".concat(function(e,t){if(!e)return"—";let s=new Date(e).getTime();if(isNaN(s))return"—";let l=t-s;if(l<0)return"刚刚";let a=Math.floor(l/6e4);return a<1?"刚刚":a<60?"".concat(a," 分钟前"):"".concat(Math.floor(a/60)," 小时前")}(t.generated_at,d),"更新")})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-lg p-3 border border-[#21262d]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-sm",children:"\uD83D\uDCFA"}),(0,l.jsx)("span",{className:"text-xs text-[#8b949e] font-medium",children:"Screen 进程"}),(0,l.jsxs)("span",{className:"ml-auto text-xs bg-green-500/15 text-green-400 px-2 py-0.5 rounded-full",children:[o.length," 个"]})]}),o.length>0?(0,l.jsxs)("div",{className:"space-y-2",children:[o.slice(0,3).map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,l.jsx)(r.Z,{status:e.stale?"degraded":"healthy",size:"sm"}),(0,l.jsx)("span",{className:"text-[#c9d1d9] truncate flex-1",children:e.name}),(0,l.jsxs)("span",{className:"text-[#6e7681] whitespace-nowrap",children:[e.age_minutes,"分钟"]})]},t)),o.length>3&&(0,l.jsxs)("div",{className:"text-[10px] text-[#6e7681] text-center pt-1",children:["+",o.length-3," 更多"]})]}):(0,l.jsx)("div",{className:"text-xs text-[#6e7681] py-2 text-center",children:"无活跃进程"})]}),(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-lg p-3 border border-[#21262d]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-sm",children:"\uD83D\uDCDC"}),(0,l.jsx)("span",{className:"text-xs text-[#8b949e] font-medium",children:"最近操作"})]}),x.length>0?(0,l.jsx)("div",{className:"space-y-1.5",children:x.slice(0,4).map((e,t)=>(0,l.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,l.jsx)("span",{className:"text-[10px] text-[#484f58] font-mono w-10 shrink-0",children:e.time}),(0,l.jsx)("span",{className:"truncate flex-1",children:function(e){if(!e)return null;if(e.startsWith("$"))return(0,l.jsx)("span",{className:"font-mono text-green-400",children:e});for(let t of["编辑","写入","读取"])if(e.startsWith(t)){let s=e.slice(t.length),a=s.match(/^[\s:"]*([^\s"]+)[\s"]*(.*)$/);if(a){let[,e,s]=a;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-[#8b949e]",children:t}),(0,l.jsx)("span",{className:"text-blue-400",children:e}),s&&(0,l.jsx)("span",{className:"text-[#8b949e]",children:s})]})}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-[#8b949e]",children:t}),(0,l.jsx)("span",{className:"text-blue-400",children:s})]})}return(0,l.jsx)("span",{className:"text-[#8b949e]",children:e})}(e.action)})]},t))}):(0,l.jsx)("div",{className:"text-xs text-[#6e7681] py-2 text-center",children:"暂无记录"})]}),(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-lg p-3 border border-[#21262d]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-sm",children:"\uD83D\uDCCA"}),(0,l.jsx)("span",{className:"text-xs text-[#8b949e] font-medium",children:"Session 统计"})]}),u?(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,l.jsx)("span",{className:"text-[#8b949e]",children:"今日 Session"}),(0,l.jsx)("span",{className:"text-white font-medium text-lg",children:u.today})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,l.jsx)("span",{className:"text-[#8b949e]",children:"累计 Session"}),(0,l.jsx)("span",{className:"text-[#c9d1d9]",children:u.total})]}),(0,l.jsx)("div",{className:"h-1.5 bg-[#21262d] rounded-full overflow-hidden mt-2",children:(0,l.jsx)("div",{className:"h-1.5 bg-gradient-to-r from-green-500 to-cyan-500 rounded-full",style:{width:u.total>0?"".concat(Math.min(u.today/u.total*100,100),"%"):"0%"}})}),(0,l.jsxs)("div",{className:"text-[10px] text-[#6e7681] text-center",children:["今日占比 ",u.total>0?(u.today/u.total*100).toFixed(1):0,"%"]})]}):(0,l.jsx)("div",{className:"text-xs text-[#6e7681] py-2 text-center",children:"暂无数据"})]})]})]}):null}function k(e){return e>=1e3?"$"+(e/1e3).toFixed(1)+"K":e>=1?"$"+e.toFixed(2):e>0?"$"+e.toFixed(4):"$0"}function w(){var e;let[t,s]=(0,a.useState)(null),[i,c]=(0,a.useState)(!1),[o,u]=(0,a.useState)(!0),[p,g]=(0,a.useState)(()=>Date.now());(0,a.useEffect)(()=>{let e=!1;async function t(){let t=await (0,N.m)();e||(t&&(s(t),c(!0)),u(!1))}t();let l=setInterval(t,3e4);return()=>{e=!0,clearInterval(l)}},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>g(Date.now()),3e4);return()=>clearInterval(e)},[]);let w=i&&t?(0,f.RW)(t):v.w7,C=i&&t?(0,f.lz)(w,6):v.w7,T=i&&t?(0,f.tV)(t):v.F3,D=i&&t&&t.merged_models?t.merged_models.map(e=>{var t,s,l,a,n,r,d,i,c,o,x,u;return{name:e.displayName||e.name||e.id,status:"healthy",tokensUsedToday:((null===(t=e.today)||void 0===t?void 0:t.input_tokens)||0)+((null===(s=e.today)||void 0===s?void 0:s.output_tokens)||0),tokensUsedWeek:((null===(l=e.week)||void 0===l?void 0:l.input_tokens)||0)+((null===(a=e.week)||void 0===a?void 0:a.output_tokens)||0),tokensUsedMonth:((null===(n=e.month)||void 0===n?void 0:n.input_tokens)||0)+((null===(r=e.month)||void 0===r?void 0:r.output_tokens)||0),avgResponseTime:0,successRate:100,color:e.color||"#6366f1",_apiKey:e.name,_calls:e.calls||0,_callsToday:(null===(d=e.today)||void 0===d?void 0:d.calls)||0,_callsWeek:(null===(i=e.week)||void 0===i?void 0:i.calls)||0,_callsMonth:(null===(c=e.month)||void 0===c?void 0:c.calls)||0,_inputTokens:e.input_tokens||0,_outputTokens:e.output_tokens||0,_cost:e.cost||0,_costToday:(null===(o=e.today)||void 0===o?void 0:o.cost)||0,_costWeek:(null===(x=e.week)||void 0===x?void 0:x.cost)||0,_costMonth:(null===(u=e.month)||void 0===u?void 0:u.cost)||0,_subModels:e.subModels||[]}}):C,O=i?D.reduce((e,t)=>e+(t._costToday||0),0):0,A=i?D.reduce((e,t)=>e+(t._costWeek||0),0):0,S=i?D.reduce((e,t)=>e+(t._costMonth||0),0):0,_=i?D.reduce((e,t)=>e+(t._callsToday||0),0):0,Z=i?D.reduce((e,t)=>e+(t._callsMonth||0),0):0,M=j.N.length,L=j.N.filter(e=>"in-progress"===e.status).length,I=j.N.filter(e=>"done"===e.status).length,G=j.N.filter(e=>"planned"===e.status).length,F=j.N.filter(e=>"blocked"===e.status).length,E={};j.N.forEach(e=>{e.model.split(/[+,]/).map(e=>e.trim()).forEach(e=>{let t=e||"未分配";E[t]=(E[t]||0)+1})});let P=Object.entries(E).sort((e,t)=>t[1]-e[1]),W=C.every(e=>"healthy"===e.status),$=C.some(e=>"down"===e.status),R=$?"异常":W?"正常":"部分降级",B=$?"text-red-400":W?"text-green-400":"text-yellow-400";return o?(0,l.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-[#8b949e] text-sm",children:"加载数据中..."})]})}):(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsx)(x,{stats:t,isLive:i}),(0,l.jsx)(y,{stats:t,isLive:i}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white",children:"总览仪表盘"}),(0,l.jsx)("p",{className:"text-sm text-[#8b949e] mt-1",children:"实时监控 AI Agent 运营状态"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(d.Z,{isLive:i,generatedAt:null==t?void 0:t.generated_at}),(0,l.jsx)(r.Z,{status:$?"down":W?"healthy":"degraded",size:"md"}),(0,l.jsxs)("span",{className:"text-sm font-medium ".concat(B),children:["系统",R]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsxs)(n.Z,{children:[(0,l.jsx)("div",{className:"text-[#8b949e] text-xs font-medium uppercase tracking-wider",children:"任务统计"}),(0,l.jsx)("div",{className:"text-3xl font-bold text-white mt-2",children:M}),(0,l.jsxs)("div",{className:"text-xs text-[#6e7681] mt-1",children:["✅ ",I," 完成 \xb7 \uD83D\uDD04 ",L," 进行中 \xb7 \uD83D\uDCCB ",G," 计划",F>0?" \xb7 \uD83D\uDEAB ".concat(F," 阻塞"):""]})]}),(0,l.jsxs)(n.Z,{children:[(0,l.jsx)("div",{className:"text-[#8b949e] text-xs font-medium uppercase tracking-wider",children:i?"今日调用":"活跃模型"}),(0,l.jsx)("div",{className:"text-3xl font-bold text-white mt-2",children:i?_.toLocaleString():C.length}),(0,l.jsx)("div",{className:"text-xs text-[#6e7681] mt-1",children:i?"本月 ".concat(Z.toLocaleString()," 次"):"主: ".concat(T.primary.split(" ")[0])})]}),(0,l.jsxs)(n.Z,{children:[(0,l.jsx)("div",{className:"text-[#8b949e] text-xs font-medium uppercase tracking-wider",children:"今日费用"}),(0,l.jsx)("div",{className:"text-3xl font-bold text-white mt-2",children:k(O)}),(0,l.jsxs)("div",{className:"text-xs text-[#6e7681] mt-1",children:["本周 ",k(A)," \xb7 本月 ",k(S)]})]}),(0,l.jsxs)(n.Z,{children:[(0,l.jsx)("div",{className:"text-[#8b949e] text-xs font-medium uppercase tracking-wider",children:"模型状态"}),(0,l.jsx)("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:C.slice(0,4).map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-1 mr-3",children:[(0,l.jsx)(r.Z,{status:e.status}),(0,l.jsx)("span",{className:"text-xs text-[#8b949e]",children:e.name.split(" ")[0]})]},e.name))}),(0,l.jsxs)("div",{className:"text-xs mt-2 ".concat(B),children:["全部",R]})]})]}),(0,l.jsx)(m,{tasks:j.N,maxItems:6}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,l.jsxs)(n.Z,{hover:!1,children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"\uD83D\uDCCB 任务进度"}),(0,l.jsx)("div",{className:"space-y-3",children:[{label:"已完成",count:I,total:M,color:"bg-green-500",textColor:"text-green-400"},{label:"进行中",count:L,total:M,color:"bg-blue-500",textColor:"text-blue-400"},{label:"计划中",count:G,total:M,color:"bg-yellow-500",textColor:"text-yellow-400"}].map(e=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,l.jsx)("span",{className:"text-[#8b949e]",children:e.label}),(0,l.jsxs)("span",{className:"font-medium ".concat(e.textColor),children:[e.count," / ",e.total]})]}),(0,l.jsx)("div",{className:"h-2 bg-[#21262d] rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-2 rounded-full transition-all duration-700 ".concat(e.color),style:{width:"".concat(e.count/e.total*100,"%")}})})]},e.label))}),(0,l.jsxs)("div",{className:"mt-4 pt-3 border-t border-[#21262d] text-xs text-[#6e7681]",children:["完成率: ",(0,l.jsxs)("span",{className:"text-green-400 font-medium",children:[(I/M*100).toFixed(0),"%"]})]}),(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-[#21262d]",children:[(0,l.jsx)("h3",{className:"text-[11px] text-gray-500 uppercase tracking-wider mb-2",children:"近期已完成"}),(0,l.jsx)("div",{className:"space-y-1.5",children:j.N.filter(e=>"done"===e.status).slice(0,5).map(e=>{var t;return(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsxs)("span",{className:"text-[11px] text-gray-400 truncate flex-1",children:["✅ ",e.title]}),(0,l.jsx)("span",{className:"text-[10px] text-gray-500 whitespace-nowrap font-mono",children:e.planTokens||e.execTokens?"~".concat((t=(e.planTokens||0)+(e.execTokens||0))>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()):"—"})]},e.id)})}),I>5&&(0,l.jsxs)("a",{href:"/tasks",className:"text-[10px] text-purple-400 hover:underline mt-1 block",children:["查看全部 ",I," 个 →"]})]})]}),(0,l.jsxs)(n.Z,{hover:!1,children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"\uD83E\uDD16 模型任务分布"}),(0,l.jsx)("div",{className:"space-y-2",children:P.map(e=>{var t;let[s,a]=e,n=a/M*100,r=(null===(t=Object.entries({"Claude Opus 4.6":"bg-purple-500","GLM-5":"bg-green-500","GLM-4-Flash":"bg-cyan-500",待定:"bg-gray-500"}).find(e=>{let[t]=e;return s.includes(t)}))||void 0===t?void 0:t[1])||"bg-blue-500";return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,l.jsx)("span",{className:"text-[#8b949e] truncate max-w-[60%]",children:s}),(0,l.jsxs)("span",{className:"text-white font-medium",children:[a," 个任务"]})]}),(0,l.jsx)("div",{className:"h-1.5 bg-[#21262d] rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-1.5 rounded-full transition-all duration-700 ".concat(r),style:{width:"".concat(n,"%")}})})]},s)})})]})]}),(0,l.jsxs)(n.Z,{hover:!1,children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"\uD83E\uDDE0 大脑状态"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-xs text-[#8b949e] uppercase tracking-wider",children:"当前主脑"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(r.Z,{status:"healthy",size:"md"}),(0,l.jsx)("span",{className:"text-white font-medium",children:T.primary})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-xs text-[#8b949e] uppercase tracking-wider",children:"备用大脑"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(r.Z,{status:"healthy",size:"md"}),(0,l.jsx)("span",{className:"text-white font-medium",children:T.backup})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-xs text-[#8b949e] uppercase tracking-wider",children:i?"总请求数":"切换统计"}),(0,l.jsxs)("div",{className:"text-white",children:["共 ",(0,l.jsx)("span",{className:"text-2xl font-bold",children:T.switchCount})," ",i?"次请求":"次",i&&(null==t?void 0:null===(e=t.brain_status)||void 0===e?void 0:e.lastSwitchTime)&&(0,l.jsxs)("span",{className:"text-xs text-[#6e7681] ml-2",children:["最后切换: ",new Date(t.brain_status.lastSwitchTime).toLocaleDateString("zh-CN")]})]})]})]})]}),(0,l.jsx)(h.Z,{models:D,title:"模型用量排行",maxItems:6}),(0,l.jsx)(b,{models:D,isLive:i})]})}},5940:function(e,t,s){"use strict";s.d(t,{N:function(){return l}});let l=[{id:"task-done-01",title:"搞钱看板 v1-v5 开发部署",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:15e3,execTokens:8e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["browser","exec","vercel"],description:"从零搭建搞钱看板，经历 v1 到 v5 五个大版本迭代。包括总览仪表盘、任务看板、模型监控、订阅服务等页面。接入真实数据源 stats.json，部署到 Vercel。",subtasks:[{id:"st-01-1",title:"v1: 基础框架 + 静态页面",done:!0},{id:"st-01-2",title:"v2: 拖拽看板 + 暗色主题",done:!0},{id:"st-01-3",title:"v3: 真实数据接入 stats.json",done:!0},{id:"st-01-4",title:"v4: 模型监控 + 费用统计",done:!0},{id:"st-01-5",title:"v5: 订阅服务 + 智谱/Claude配额",done:!0}],createdAt:"2026-02-10T08:00:00Z",completedAt:"2026-02-17T12:00:00Z",archived:!0},{id:"task-done-02",title:"备婚手册文档 v1-v4",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:1e4,execTokens:12e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["feishu_doc","browser","image"],description:"在飞书上创建完整的备婚手册文档，包含婚礼筹备时间线、预算表、供应商对比、宾客管理等内容。经历4个版本迭代优化。",subtasks:[{id:"st-02-1",title:"v1: 基础框架和时间线",done:!0},{id:"st-02-2",title:"v2: 预算表 + 供应商对比",done:!0},{id:"st-02-3",title:"v3: 宾客管理 + 座位安排",done:!0},{id:"st-02-4",title:"v4: 最终版本完善",done:!0}],createdAt:"2026-01-10T08:00:00Z",completedAt:"2026-02-15T18:00:00Z",archived:!0},{id:"task-done-03",title:"PainRadar 商机雷达",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)+Opus",planTokens:2e4,execTokens:2e5,viaClaudeCode:!0,viaOpenSpec:!1,model:"GLM-5 + Claude Opus 4.6",tools:["exec","ssh","mysql"],description:"用户痛点自动抓取与分析系统。从 Reddit、x.com 等平台抓取用户抱怨和需求，用 AI 分析商机。部署在 spaceship 服务器上。",subtasks:[{id:"st-03-1",title:"爬虫模块开发",done:!0},{id:"st-03-2",title:"AI 分析管道",done:!0},{id:"st-03-3",title:"MySQL 数据存储",done:!0},{id:"st-03-4",title:"前端展示页面",done:!0}],createdAt:"2026-01-20T08:00:00Z",completedAt:"2026-02-14T16:00:00Z",archived:!0},{id:"task-done-04",title:"飞书群聊互动（周杨式家族大群）",status:"done",priority:"中",planner:"搞钱大王",executor:"Opus",planTokens:2e3,execTokens:3e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["browser","feishu"],description:"在飞书家族群中与家人互动，包括发送消息、回复问题、分享有趣内容等。",createdAt:"2026-02-01T08:00:00Z",completedAt:"2026-02-16T20:00:00Z",archived:!0},{id:"task-done-05",title:"飞书账号注册 + 登录",status:"done",priority:"中",planner:"搞钱大王",executor:"Opus",planTokens:1e3,execTokens:5e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["browser"],description:"通过浏览器自动化完成飞书账号注册和登录流程。",createdAt:"2026-01-28T08:00:00Z",completedAt:"2026-01-29T10:00:00Z",archived:!0},{id:"task-done-06",title:"Claude Code Hooks 配置",status:"done",priority:"中",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:8e3,execTokens:25e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","write"],description:"配置 Claude Code 的 hooks 系统，实现自动化工作流。包括 pre-commit、post-session 等钩子。",createdAt:"2026-02-05T08:00:00Z",completedAt:"2026-02-06T14:00:00Z",archived:!0},{id:"task-done-07",title:"Stats Collector 数据管道",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:1e4,execTokens:3e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","ssh"],description:"搭建 OpenClaw 会话数据采集管道。扫描 session JSONL 文件，聚合模型调用统计，生成 stats.json 供看板消费。",subtasks:[{id:"st-07-1",title:"JSONL 解析器",done:!0},{id:"st-07-2",title:"模型统计聚合",done:!0},{id:"st-07-3",title:"定时执行 cron",done:!0},{id:"st-07-4",title:"上传到 spaceship",done:!0}],createdAt:"2026-02-08T08:00:00Z",completedAt:"2026-02-12T16:00:00Z",archived:!0},{id:"task-done-08",title:"备婚管理网站",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:8e3,execTokens:1e5,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","vercel","git"],description:"独立的备婚管理网站，支持时间线管理、待办事项、预算追踪等功能。部署在 Vercel 上。",createdAt:"2026-01-15T08:00:00Z",completedAt:"2026-02-01T18:00:00Z",archived:!0},{id:"task-done-09",title:"主备大脑切换系统",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Opus",planTokens:1e4,execTokens:4e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","write"],description:"实现 Claude Opus 和 CoCo (MiniMax) 之间的主备自动切换。当主脑限流时自动切换到备用大脑，恢复后自动切回。",createdAt:"2026-01-12T08:00:00Z",completedAt:"2026-01-18T14:00:00Z",archived:!0},{id:"task-done-10",title:"OpenSpec-bg Skill 创建",status:"done",priority:"中",planner:"瓦力(Opus)",executor:"Opus",planTokens:5e3,execTokens:2e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","write"],description:"创建 openspec-bg skill，支持 Claude Code 后台任务执行。",createdAt:"2026-01-18T08:00:00Z",completedAt:"2026-01-22T12:00:00Z",archived:!0},{id:"task-done-11",title:"Lark Manager Skill",status:"done",priority:"中",planner:"瓦力(Opus)",executor:"Opus",planTokens:5e3,execTokens:15e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","write"],description:"创建飞书文档 API 管理 skill，封装飞书开放平台 API 调用。",createdAt:"2026-01-20T08:00:00Z",completedAt:"2026-01-25T10:00:00Z",archived:!0},{id:"task-done-12",title:"每日商业报告",status:"done",priority:"中",planner:"瓦力(Opus)",executor:"Opus",planTokens:3e3,execTokens:1e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["feishu_doc"],description:"自动生成每日商业报告文档，包含市场动态、竞品分析、机会识别等内容，推送到飞书。",createdAt:"2026-02-01T08:00:00Z",completedAt:"2026-02-10T18:00:00Z",archived:!0},{id:"task-done-13",title:"小红书 MCP 下载",status:"done",priority:"低",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:2e3,execTokens:5e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec"],description:"下载并配置小红书 MCP (Model Context Protocol) 工具。",createdAt:"2026-02-12T08:00:00Z",completedAt:"2026-02-12T14:00:00Z",archived:!0},{id:"task-done-14",title:"飞书日历创建",status:"done",priority:"中",planner:"搞钱大王",executor:"Opus",planTokens:1e3,execTokens:8e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["feishu_api"],description:"通过飞书 API 创建共享日历，用于备婚时间线管理和重要日期提醒。",createdAt:"2026-02-05T08:00:00Z",completedAt:"2026-02-07T12:00:00Z",archived:!0},{id:"task-wip-01",title:"Claude.ai 用量抓取",status:"blocked",priority:"高",planner:"瓦力(Opus)",executor:"Opus",planTokens:5e3,execTokens:15e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["browser"],description:"从 Claude.ai 网页端抓取真实用量数据。目前被 Cloudflare 防护阻拦，需要寻找替代方案。",subtasks:[{id:"st-wip01-1",title:"浏览器自动化登录",done:!0},{id:"st-wip01-2",title:"绕过 Cloudflare",done:!1},{id:"st-wip01-3",title:"用量数据解析",done:!1}],createdAt:"2026-02-14T08:00:00Z"},{id:"task-wip-02",title:"搞钱计划 — 用户痛点挖掘",status:"in-progress",priority:"高",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",planTokens:1e4,execTokens:5e4,viaClaudeCode:!0,viaOpenSpec:!0,model:"GLM-5",tools:["exec","web_search"],description:"在 x.com 和 Reddit 上挖掘用户痛点，分析哪些可以做成付费产品。",openspecChange:"painradar-scraper",openspecProposal:"## 提案：用户痛点自动挖掘系统\n\n### 目标\n从 Reddit、x.com、Hacker News 等平台自动抓取用户抱怨和需求，\n用 AI 分析商机，生成可行性报告。\n\n### 技术方案\n- 爬虫：HTTP + 代理池\n- AI 分析：GLM-5 批量评分\n- 输出：JSON → 前端看板",openspecTasks:"- [x] Reddit 痛点抓取模块\n- [ ] x.com 痛点抓取（需代理）\n- [ ] Hacker News 抓取\n- [ ] AI 评分管道（GLM-5）\n- [ ] 商机排序输出",subtasks:[{id:"st-wip02-1",title:"Reddit 痛点抓取",done:!0},{id:"st-wip02-2",title:"x.com 痛点抓取",done:!1},{id:"st-wip02-3",title:"商机评分排序",done:!1}],createdAt:"2026-02-10T08:00:00Z"},{id:"task-wip-03",title:"支付链路 Creem/Wise",status:"in-progress",priority:"高",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",planTokens:5e3,execTokens:3e4,viaClaudeCode:!0,viaOpenSpec:!0,model:"GLM-5",tools:["exec"],description:"打通海外支付链路，对接 Creem 支付和 Wise 收款，为未来产品收费做准备。",openspecChange:"payment-integration",openspecProposal:"## 提案：海外支付链路\n\n### 目标\n集成 Creem 支付网关 + Wise 多币种收款，\n让 AI Tools 产品能接受全球付款。\n\n### 技术方案\n- Creem SDK 集成\n- Webhook 回调处理\n- Wise API 自动提现",openspecTasks:"- [x] Creem SDK 集成\n- [x] 支付回调 webhook\n- [ ] Wise API 自动提现\n- [ ] 订单管理页面\n- [ ] 退款流程",createdAt:"2026-02-11T08:00:00Z"},{id:"task-wip-04",title:"小说《青云路》写作",status:"in-progress",priority:"低",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",planTokens:15e3,execTokens:1e5,viaClaudeCode:!0,viaOpenSpec:!1,model:"GLM-5",tools:["write"],description:"网络小说《青云路》的创作，由 Claude Code + GLM-5 负责内容生成。",createdAt:"2026-02-05T08:00:00Z"},{id:"task-wip-05",title:"Skills 管理看板",status:"in-progress",priority:"中",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",planTokens:5e3,execTokens:3e4,viaClaudeCode:!0,viaOpenSpec:!1,model:"GLM-5",tools:["exec","write"],description:"在搞钱看板中新增 Skills 管理页面，展示所有已安装和内置的 skills。",createdAt:"2026-02-16T08:00:00Z"},{id:"task-plan-01",title:"AI Tools 独立产品上线",status:"planned",priority:"高",planner:"瓦力(Opus)",executor:"OpenSpec-bg(GLM-5)",viaClaudeCode:!0,viaOpenSpec:!0,model:"GLM-5",tools:["exec","vercel"],description:"将 AI 工具集打包成独立产品上线。超大项目，交给 OpenSpec-bg 管理多任务循环执行。",openspecChange:"ai-tools-product",openspecProposal:"## 提案：AI Tools 独立产品\n\n### 目标\n打造一个面向普通用户的 AI 工具集网站，\n集成多个实用工具（文本/图片/代码），收费 $9.9/月。\n\n### 技术方案\n- Next.js + Tailwind\n- Creem 支付\n- 部署 Vercel\n- GLM-5 作为后端 AI",openspecTasks:"- [ ] 项目脚手架搭建\n- [ ] 工具1: AI 文本改写\n- [ ] 工具2: 代码解释器\n- [ ] 工具3: 图片描述生成\n- [ ] 支付集成\n- [ ] 用户系统\n- [ ] 部署上线",createdAt:"2026-02-15T08:00:00Z"},{id:"task-plan-02",title:"周报 cron 自动化",status:"planned",priority:"中",planner:"瓦力(Opus)",executor:"GLM-5 子agent",viaClaudeCode:!1,viaOpenSpec:!1,model:"GLM-5",tools:["cron","feishu_doc"],description:"自动化生成每周周报，汇总本周完成的任务、费用统计、下周计划等。非多模态任务，分配给 GLM-5 子agent。",createdAt:"2026-02-16T08:00:00Z"},{id:"task-plan-03",title:"飞书文档 API 长文写入修复",status:"planned",priority:"中",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",viaClaudeCode:!0,viaOpenSpec:!1,model:"GLM-5",tools:["exec","write"],description:"修复飞书文档 API 在写入长文本时的分块问题。编码任务优先分配 Claude Code。",createdAt:"2026-02-17T08:00:00Z"}]}},function(e){e.O(0,[648,910,971,117,744],function(){return e(e.s=2211)}),_N_E=e.O()}]);