(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{3398:function(e,s,t){Promise.resolve().then(t.bind(t,6031))},6031:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var l=t(7437),n=t(2265),a=t(7764),d=t(5940),r=t(1837);function i(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(0)+"K":e.toString()}let c=[{key:"in-progress",label:"进行中",emoji:"\uD83D\uDD04",color:"border-t-blue-500"},{key:"planned",label:"计划中",emoji:"\uD83D\uDCCB",color:"border-t-yellow-500"},{key:"blocked",label:"阻塞",emoji:"\uD83D\uDEAB",color:"border-t-red-500"}],o={高:"text-red-400 bg-red-500/10 border-red-500/30",中:"text-yellow-400 bg-yellow-500/10 border-yellow-500/30",低:"text-gray-400 bg-gray-500/10 border-gray-500/30"},x={browser:"\uD83C\uDF10",exec:"⚡",write:"✏️",ssh:"\uD83D\uDD12",vercel:"▲",git:"\uD83D\uDD00",feishu_doc:"\uD83D\uDCC4",feishu:"\uD83D\uDCAC",feishu_api:"\uD83D\uDD17",image:"\uD83D\uDDBC️",mysql:"\uD83D\uDDC3️",web_search:"\uD83D\uDD0D",cron:"⏰"};function p(e){switch(e){case"main":return"bg-purple-500/15 text-purple-400 border-purple-500/30";case"group":return"bg-blue-500/15 text-blue-400 border-blue-500/30";case"subagent":return"bg-green-500/15 text-green-400 border-green-500/30";default:return"bg-gray-500/15 text-gray-400 border-gray-500/30"}}function u(e){switch(e){case"active":return{color:"bg-green-400",label:"活跃"};case"recent":return{color:"bg-yellow-400",label:"近期"};case"idle":return{color:"bg-gray-400",label:"空闲"};default:return{color:"bg-gray-400",label:"未知"}}}function m(e){if(e<1)return"刚刚";if(e<60)return"".concat(e," 分钟前");let s=Math.floor(e/60);return s<24?"".concat(s," 小时前"):"".concat(Math.floor(s/24)," 天前")}function h(e){let{history:s}=e,[t,a]=(0,n.useState)(new Set),d=e=>{a(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})},r=e=>{switch(e){case"success":return{dot:"bg-green-400",badge:"bg-green-500/15 text-green-400 border-green-500/30",label:"成功"};case"failed":return{dot:"bg-red-400",badge:"bg-red-500/15 text-red-400 border-red-500/30",label:"失败"};case"in_progress":return{dot:"bg-yellow-400 animate-pulse",badge:"bg-yellow-500/15 text-yellow-400 border-yellow-500/30",label:"进行中"};default:return{dot:"bg-gray-400",badge:"bg-gray-500/15 text-gray-400 border-gray-500/30",label:"未知"}}};return(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-xl border border-[#30363d] overflow-hidden",children:[(0,l.jsx)("div",{className:"px-4 py-3 border-b border-[#21262d] flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCE6"}),(0,l.jsx)("span",{className:"font-semibold text-white text-sm",children:"OpenSpec 任务记录"}),(0,l.jsxs)("span",{className:"bg-cyan-500/15 text-cyan-400 text-xs font-medium px-2 py-0.5 rounded-full",children:[s.length," 个"]})]})}),(0,l.jsx)("div",{className:"p-4",children:s.length>0?(0,l.jsx)("div",{className:"space-y-2",children:s.map((e,s)=>{let n=t.has(e.change),a=r(e.status);return(0,l.jsxs)("div",{className:"bg-[#161b22] rounded-lg border border-[#21262d] overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-[#1c2128] transition-colors",onClick:()=>d(e.change),children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full shrink-0 ".concat(a.dot)}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"text-xs text-white font-medium truncate",children:e.change}),(0,l.jsxs)("div",{className:"text-[10px] text-[#6e7681] mt-0.5 flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-green-400",children:[e.completed,"/",e.total," 任务"]}),e.duration&&(0,l.jsxs)("span",{children:["\xb7 ",e.duration]}),e.cost&&(0,l.jsxs)("span",{className:"text-purple-400",children:["\xb7 ",e.cost]})]})]}),(0,l.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded border ".concat(a.badge),children:a.label}),(0,l.jsx)("span",{className:"text-[#484f58] text-xs",children:n?"▲":"▼"})]}),n&&e.tasks&&(0,l.jsx)("div",{className:"border-t border-[#21262d] p-2 space-y-1",children:e.tasks.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-[11px] p-2 bg-[#0d1117] rounded",children:[(0,l.jsx)("span",{className:e.done?"text-green-400":"text-[#484f58]",children:e.done?"☑":"☐"}),(0,l.jsx)("span",{className:e.done?"text-[#8b949e] line-through":"text-white",children:e.title})]},s))})]},s)})}):(0,l.jsx)("div",{className:"text-center py-8 text-[#6e7681] text-sm",children:"暂无 OpenSpec 记录"})})]})}function b(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?e.length<=s?e:e.slice(0,s)+"...":"—"}function g(e){let{sessions:s,totalEvents:t,now:a}=e,[d,r]=(0,n.useState)(new Set),i=Object.entries(s.reduce((e,s)=>{let t=s.cwd;return e[t]||(e[t]=[]),e[t].push(s),e},{}));i.sort((e,s)=>{var t,l;let n=(null===(t=e[1][e[1].length-1])||void 0===t?void 0:t.started)||"";return new Date((null===(l=s[1][s[1].length-1])||void 0===l?void 0:l.started)||"").getTime()-new Date(n).getTime()});let c=e=>{r(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})};return(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-xl border border-[#30363d] overflow-hidden",children:[(0,l.jsxs)("div",{className:"px-4 py-3 border-b border-[#21262d] flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCBB"}),(0,l.jsx)("span",{className:"font-semibold text-white text-sm",children:"Claude Code Session"}),(0,l.jsxs)("span",{className:"bg-purple-500/15 text-purple-400 text-xs font-medium px-2 py-0.5 rounded-full",children:[i.length," 项目"]}),(0,l.jsxs)("span",{className:"text-[10px] text-[#6e7681]",children:["(",s.length," 次执行)"]})]}),(0,l.jsxs)("span",{className:"text-xs text-[#6e7681]",children:["共 ",t," 事件"]})]}),(0,l.jsx)("div",{className:"p-4",children:i.length>0?(0,l.jsxs)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[i.slice(0,15).map(e=>{let[s,t]=e,n=d.has(s),r=s.includes("subagent")||s.includes("agent")?{label:"subagent",color:"bg-orange-500/15 text-orange-400 border-orange-500/30"}:s.includes("group")?{label:"group",color:"bg-purple-500/15 text-purple-400 border-purple-500/30"}:{label:"main",color:"bg-green-500/15 text-green-400 border-green-500/30"},i=t[t.length-1],o=t.reduce((e,s)=>e+s.tools,0),x=t.reduce((e,s)=>e+s.failures,0),p=t.some(e=>!e.ended);return(0,l.jsxs)("div",{className:"bg-[#161b22] rounded-lg border border-[#21262d] overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-[#1c2128] transition-colors",onClick:()=>c(s),children:[(0,l.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded border ".concat(r.color),children:r.label}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"text-xs text-[#8b949e] truncate font-mono",title:s,children:s.split("/").slice(-2).join("/")}),(0,l.jsxs)("div",{className:"text-[10px] text-[#6e7681] mt-0.5 flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-purple-400 font-medium",children:[t.length," 次执行"]}),i.started&&(0,l.jsxs)("span",{children:["最后 ",function(e,s){if(!e)return"—";let t=new Date(e).getTime();if(isNaN(t))return"—";let l=s-t;if(l<0)return"刚刚";let n=Math.floor(l/6e4);return n<1?"刚刚":n<60?"".concat(n," 分钟前"):"".concat(Math.floor(n/60)," 小时前")}(i.started,a)]}),(0,l.jsxs)("span",{children:["\xb7 ",o," 工具"]}),x>0&&(0,l.jsxs)("span",{className:"text-red-400",children:["\xb7 ",x," 失败"]})]})]}),p&&(0,l.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-green-500/15 text-green-400 border border-green-500/30",children:"运行中"}),(0,l.jsx)("span",{className:"text-[#484f58] text-xs",children:n?"▲":"▼"})]}),n&&(0,l.jsx)("div",{className:"border-t border-[#21262d] p-2 space-y-1.5",children:t.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-[11px] p-2 bg-[#0d1117] rounded",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:(e.ended,"#22c55e")}}),(0,l.jsx)("span",{className:"text-[#6e7681] font-mono w-16 shrink-0",children:e.started?new Date(e.started).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):"—"}),(0,l.jsxs)("span",{className:"text-[#8b949e] flex-1",children:[e.tools," 工具",e.failures>0&&(0,l.jsxs)("span",{className:"text-red-400 ml-1",children:["\xb7 ",e.failures," 失败"]})]}),!e.ended&&(0,l.jsx)("span",{className:"text-green-400",children:"运行中"}),e.ended&&(0,l.jsxs)("span",{className:"text-[#484f58]",children:["结束 ",new Date(e.ended).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})]})]},e.id||s))})]},s)}),i.length>15&&(0,l.jsxs)("div",{className:"text-[10px] text-[#6e7681] text-center py-2",children:["还有 ",i.length-15," 个项目"]})]}):(0,l.jsx)("div",{className:"text-center py-8 text-[#6e7681] text-sm",children:"暂无 Session 记录"})})]})}function j(){var e,s;let[t,j]=(0,n.useState)(null),[N,v]=(0,n.useState)("board"),[f,y]=(0,n.useState)(!1),[C,w]=(0,n.useState)("realtime"),[k,D]=(0,n.useState)(null),[T,O]=(0,n.useState)(()=>Date.now());(0,n.useEffect)(()=>{let e=!1;async function s(){let s=await (0,r.m)();!e&&s&&D(s)}s();let t=setInterval(s,3e4);return()=>{e=!0,clearInterval(t)}},[]),(0,n.useEffect)(()=>{let e=setInterval(()=>O(Date.now()),3e4);return()=>clearInterval(e)},[]);let A=e=>{j(s=>s===e?null:e)},S=d.N.filter(e=>"done"!==e.status),Z=d.N.filter(e=>"done"===e.status),M=d.N.length,L=Z.length,_=d.N.filter(e=>"in-progress"===e.status).length,I=d.N.filter(e=>"planned"===e.status).length,P=d.N.filter(e=>"blocked"===e.status).length,G=d.N.reduce((e,s)=>e+(s.planTokens||0),0),E=d.N.reduce((e,s)=>e+(s.execTokens||0),0),B=(null==k?void 0:k.active_tasks)||[],F=(null==k?void 0:null===(e=k.wali_status)||void 0===e?void 0:e.queue)||[],z=null==k?void 0:k.claude_code,R=(null==z?void 0:z.sessions)||[],W=(null==k?void 0:k.live_sessions)||[],H=(null==k?void 0:null===(s=k.wali_status)||void 0===s?void 0:s.taskProgress)||(null==k?void 0:k.task_progress),K=(null==k?void 0:k.openspec_history)||[],q=e=>{let s=t===e.id;return(0,l.jsxs)("div",{onClick:()=>A(e.id),className:"\n          bg-[#161b22] border rounded-lg p-4 cursor-pointer transition-all duration-200\n          ".concat(s?"border-purple-500/50 ring-1 ring-purple-500/20":"border-[#30363d] hover:border-[#484f58]","\n        "),children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-white leading-snug flex-1",children:e.title}),(0,l.jsx)("span",{className:"shrink-0 text-xs px-1.5 py-0.5 rounded border ".concat(o[e.priority]),children:e.priority})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,l.jsxs)("span",{className:"text-xs text-[#8b949e] bg-[#21262d] px-2 py-0.5 rounded",title:"规划者",children:["\uD83E\uDDE0 ",e.planner]}),(0,l.jsx)("span",{className:"text-[#484f58] text-xs",children:"→"}),(0,l.jsxs)("span",{className:"text-xs text-[#8b949e] bg-[#21262d] px-2 py-0.5 rounded",title:"执行者",children:["⚙️ ",e.executor]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1 mb-2",children:[e.viaClaudeCode&&(0,l.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-green-500/10 text-green-400 border border-green-500/30",children:"\uD83C\uDFF7️ Claude Code"}),e.viaOpenSpec&&(0,l.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-cyan-500/10 text-cyan-400 border border-cyan-500/30",children:"\uD83C\uDFF7️ OpenSpec"}),e.tools.slice(0,3).map(e=>(0,l.jsxs)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[#21262d] text-[#8b949e] border border-[#30363d]",children:[x[e]||"\uD83D\uDD27"," ",e]},e)),e.tools.length>3&&(0,l.jsxs)("span",{className:"text-[10px] text-[#6e7681]",children:["+",e.tools.length-3]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-[#6e7681]",children:[(0,l.jsx)("div",{className:"flex items-center gap-2",children:e.planTokens||e.execTokens?(0,l.jsxs)("span",{className:"text-[10px] text-[#484f58]",children:["规划 ~",i(e.planTokens||0)," / 执行 ~",i(e.execTokens||0),"session-log"!==e.tokenSource&&(0,l.jsx)("span",{className:"ml-1 text-yellow-600",children:"(预估)"})]}):null}),(0,l.jsx)("span",{className:"text-[#484f58]",children:s?"▲":"▼"})]}),s&&(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-[#21262d] space-y-3",children:[e.description&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs text-[#6e7681] mb-1",children:"\uD83D\uDCDD 描述"}),(0,l.jsx)("p",{className:"text-xs text-[#8b949e] leading-relaxed",children:e.description})]}),e.subtasks&&e.subtasks.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-xs text-[#6e7681] mb-1",children:["\uD83D\uDCCB 子任务 (",e.subtasks.filter(e=>e.done).length,"/",e.subtasks.length,")"]}),(0,l.jsx)("div",{className:"space-y-1",children:e.subtasks.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,l.jsx)("span",{className:e.done?"text-green-400":"text-[#484f58]",children:e.done?"☑":"☐"}),(0,l.jsx)("span",{className:e.done?"text-[#8b949e] line-through":"text-white",children:e.title})]},e.id))})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[#6e7681]",children:"规划者"}),(0,l.jsx)("div",{className:"text-white mt-0.5",children:e.planner})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[#6e7681]",children:"执行者"}),(0,l.jsx)("div",{className:"text-white mt-0.5",children:e.executor})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[#6e7681]",children:"使用模型"}),(0,l.jsx)("div",{className:"text-white mt-0.5",children:e.model})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[#6e7681]",children:"创建时间"}),(0,l.jsx)("div",{className:"text-white mt-0.5",children:new Date(e.createdAt).toLocaleDateString("zh-CN")})]}),e.completedAt&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[#6e7681]",children:"完成时间"}),(0,l.jsx)("div",{className:"text-green-400 mt-0.5",children:new Date(e.completedAt).toLocaleDateString("zh-CN")})]}),e.planTokens||e.execTokens?(0,l.jsxs)("div",{children:[(0,l.jsxs)("span",{className:"text-[#6e7681]",children:["Token 消耗 ","session-log"!==e.tokenSource&&(0,l.jsx)("span",{className:"text-yellow-600 text-[10px]",children:"(预估)"})]}),(0,l.jsxs)("div",{className:"text-white mt-0.5",children:["规划 ",i(e.planTokens||0)," + 执行 ",i(e.execTokens||0)]})]}):null]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-xs text-[#6e7681]",children:"执行方式"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-1",children:[e.viaClaudeCode&&(0,l.jsx)("span",{className:"text-xs px-2 py-1 rounded-md bg-green-500/10 text-green-400 border border-green-500/30",children:"✅ Claude Code"}),e.viaOpenSpec&&(0,l.jsx)("span",{className:"text-xs px-2 py-1 rounded-md bg-cyan-500/10 text-cyan-400 border border-cyan-500/30",children:"✅ OpenSpec-bg"}),!e.viaClaudeCode&&!e.viaOpenSpec&&(0,l.jsx)("span",{className:"text-xs px-2 py-1 rounded-md bg-purple-500/10 text-purple-400 border border-purple-500/30",children:"直接执行 (瓦力/Opus)"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-xs text-[#6e7681]",children:"工具列表"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-1",children:e.tools.map(e=>(0,l.jsxs)("span",{className:"text-xs px-2 py-1 rounded-md bg-[#0d1117] text-[#8b949e] border border-[#30363d]",children:[x[e]||"\uD83D\uDD27"," ",e]},e))})]}),e.viaOpenSpec&&(e.openspecProposal||e.openspecTasks)&&(0,l.jsxs)("div",{className:"col-span-full border-t border-[#21262d] pt-3 mt-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-xs font-medium text-cyan-400",children:"\uD83D\uDCE6 OpenSpec"}),e.openspecChange&&(0,l.jsxs)("span",{className:"text-[10px] text-gray-500 bg-gray-700/50 px-1.5 py-0.5 rounded font-mono",children:["change: ",e.openspecChange]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.openspecProposal&&(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-lg p-3 border border-cyan-500/20",children:[(0,l.jsx)("span",{className:"text-[10px] text-cyan-400 font-medium uppercase tracking-wider",children:"\uD83D\uDCC4 Proposal"}),(0,l.jsx)("pre",{className:"text-[11px] text-gray-400 mt-1.5 whitespace-pre-wrap font-sans leading-relaxed",children:e.openspecProposal})]}),e.openspecTasks&&(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-lg p-3 border border-green-500/20",children:[(0,l.jsx)("span",{className:"text-[10px] text-green-400 font-medium uppercase tracking-wider",children:"✅ Tasks.md"}),(0,l.jsx)("pre",{className:"text-[11px] text-gray-400 mt-1.5 whitespace-pre-wrap font-sans leading-relaxed",children:e.openspecTasks})]})]})]})]})]},e.id)};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCCB 任务看板"}),(0,l.jsxs)("p",{className:"text-sm text-[#8b949e] mt-1",children:["共 ",M," 个任务 \xb7 ✅ ",L," 完成 \xb7 \uD83D\uDD04 ",_," 进行中 \xb7 \uD83D\uDCCB ",I," 计划",P>0?" \xb7 \uD83D\uDEAB ".concat(P," 阻塞"):""]}),(0,l.jsxs)("p",{className:"text-xs text-[#6e7681] mt-0.5",children:["总 Token: 规划 ~",i(G)," / 执行 ~",i(E)," ",(0,l.jsx)("span",{className:"text-yellow-600",children:"(预估值，真实消耗见模型监控页)"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 self-start",children:[(0,l.jsx)("button",{onClick:()=>w("realtime"),className:"text-xs px-3 py-1.5 rounded-lg border transition-colors ".concat("realtime"===C?"bg-green-500/20 border-green-500/50 text-green-400":"bg-[#21262d] border-[#30363d] text-[#8b949e] hover:text-white"),children:"实时"}),(0,l.jsx)("button",{onClick:()=>w("history"),className:"text-xs px-3 py-1.5 rounded-lg border transition-colors ".concat("history"===C?"bg-purple-500/20 border-purple-500/50 text-purple-400":"bg-[#21262d] border-[#30363d] text-[#8b949e] hover:text-white"),children:"历史"})]})]}),"realtime"===C?(0,l.jsxs)("div",{className:"space-y-6",children:[W.length>0&&(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-xl border border-[#30363d] overflow-hidden",children:[(0,l.jsx)("div",{className:"px-4 py-3 border-b border-[#21262d] flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCAC"}),(0,l.jsx)("span",{className:"font-semibold text-white text-sm",children:"活跃 Session"}),(0,l.jsxs)("span",{className:"bg-cyan-500/15 text-cyan-400 text-xs font-medium px-2 py-0.5 rounded-full",children:[W.length," 个"]})]})}),(0,l.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-xs",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-[#6e7681] border-b border-[#21262d]",children:[(0,l.jsx)("th",{className:"text-left py-2 px-4 font-medium",children:"Label"}),(0,l.jsx)("th",{className:"text-left py-2 px-4 font-medium",children:"Kind"}),(0,l.jsx)("th",{className:"text-left py-2 px-4 font-medium",children:"Executor"}),(0,l.jsx)("th",{className:"text-left py-2 px-4 font-medium",children:"Last Action"}),(0,l.jsx)("th",{className:"text-center py-2 px-4 font-medium",children:"Status"}),(0,l.jsx)("th",{className:"text-right py-2 px-4 font-medium",children:"活跃时间"})]})}),(0,l.jsx)("tbody",{children:W.map((e,s)=>{let t=u(e.status);return(0,l.jsxs)("tr",{className:"border-b border-[#161b22] hover:bg-[#161b22]",children:[(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)("span",{className:"text-white font-medium truncate block max-w-[200px]",children:e.label})}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded border ".concat(p(e.kind)),children:e.kind})}),(0,l.jsx)("td",{className:"py-3 px-4 text-[#8b949e] truncate max-w-[120px]",children:e.executor||"—"}),(0,l.jsx)("td",{className:"py-3 px-4 text-[#6e7681] truncate max-w-[200px]",title:e.lastAction,children:b(e.lastAction||"",50)}),(0,l.jsx)("td",{className:"py-3 px-4 text-center",children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(t.color)}),(0,l.jsx)("span",{className:"text-[10px] text-[#8b949e]",children:t.label})]})}),(0,l.jsx)("td",{className:"py-3 px-4 text-right text-[#8b949e]",children:m(e.lastActiveMinutes)})]},e.id||s)})})]})}),(0,l.jsx)("div",{className:"sm:hidden p-3 space-y-2",children:W.map((e,s)=>{let t=u(e.status);return(0,l.jsxs)("div",{className:"p-3 bg-[#161b22] rounded-lg border border-[#21262d]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded border ".concat(p(e.kind)),children:e.kind}),(0,l.jsx)("span",{className:"text-white font-medium text-xs truncate flex-1",children:e.label}),(0,l.jsx)("span",{className:"w-2 h-2 rounded-full shrink-0 ".concat(t.color)})]}),(0,l.jsx)("div",{className:"text-[11px] text-[#8b949e] mb-1 truncate",title:e.lastAction,children:b(e.lastAction||"",40)}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-[10px] text-[#6e7681]",children:[(0,l.jsx)("span",{children:e.executor||"—"}),(0,l.jsx)("span",{children:m(e.lastActiveMinutes)})]})]},e.id||s)})})]}),H&&(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-xl border border-[#30363d] overflow-hidden",children:[(0,l.jsxs)("div",{className:"px-4 py-3 border-b border-[#21262d] flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCCA"}),(0,l.jsx)("span",{className:"font-semibold text-white text-sm",children:"任务进度"}),(0,l.jsxs)("span",{className:"text-xs text-[#8b949e]",children:[H.completed,"/",H.total," 完成"]})]}),(0,l.jsxs)("span",{className:"text-lg font-bold text-green-400",children:[H.percentage.toFixed(0),"%"]})]}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("div",{className:"h-3 bg-[#21262d] rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-3 bg-gradient-to-r from-green-500 to-cyan-500 rounded-full transition-all duration-700",style:{width:"".concat(H.percentage,"%")}})})}),H.phases&&H.phases.length>0&&(0,l.jsx)("div",{className:"space-y-2",children:H.phases.map((e,s)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,l.jsx)("span",{className:"text-[#8b949e]",children:e.name}),(0,l.jsxs)("span",{className:"text-white font-medium",children:[e.done,"/",e.tasks]})]}),(0,l.jsx)("div",{className:"h-2 bg-[#21262d] rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-2 bg-blue-500 rounded-full transition-all duration-500",style:{width:"".concat(e.tasks>0?e.done/e.tasks*100:0,"%")}})})]},s))})]})]}),K.length>0&&(0,l.jsx)(h,{history:K}),(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-xl border border-[#30363d] overflow-hidden",children:[(0,l.jsx)("div",{className:"px-4 py-3 border-b border-[#21262d] flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCFA"}),(0,l.jsx)("span",{className:"font-semibold text-white text-sm",children:"Screen 进程"}),(0,l.jsxs)("span",{className:"bg-green-500/15 text-green-400 text-xs font-medium px-2 py-0.5 rounded-full",children:[B.length," 个"]})]})}),(0,l.jsx)("div",{className:"p-4",children:B.length>0?(0,l.jsx)("div",{className:"space-y-3",children:B.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-[#161b22] rounded-lg border border-[#21262d]",children:[(0,l.jsx)(a.Z,{status:e.stale?"degraded":"healthy",size:"md"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"text-sm text-white font-medium truncate",children:e.name}),(0,l.jsxs)("div",{className:"text-xs text-[#6e7681] mt-0.5",children:["运行 ",e.age_minutes," 分钟 \xb7 最后输出 ",e.last_output_minutes," 分钟前"]})]}),(0,l.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(e.stale?"bg-yellow-500/15 text-yellow-400 border border-yellow-500/30":"bg-green-500/15 text-green-400 border border-green-500/30"),children:e.stale?"无响应":"运行中"})]},s))}):(0,l.jsx)("div",{className:"text-center py-8 text-[#6e7681] text-sm",children:"暂无活跃的 Screen 进程"})})]}),z&&(0,l.jsx)(g,{sessions:R,totalEvents:z.total_events,now:T}),(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-xl border border-[#30363d] overflow-hidden",children:[(0,l.jsx)("div",{className:"px-4 py-3 border-b border-[#21262d] flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCCB"}),(0,l.jsx)("span",{className:"font-semibold text-white text-sm",children:"待办队列"}),(0,l.jsxs)("span",{className:"bg-yellow-500/15 text-yellow-400 text-xs font-medium px-2 py-0.5 rounded-full",children:[F.length," 项"]})]})}),(0,l.jsx)("div",{className:"p-4",children:F.length>0?(0,l.jsx)("div",{className:"space-y-2",children:F.map((e,s)=>{let t="string"==typeof e?e:e.task,n="object"==typeof e?e.executor:void 0,d="object"==typeof e?e.planned:void 0;return(0,l.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-[#161b22] rounded-lg border border-[#21262d]",children:[(0,l.jsx)(a.Z,{status:"degraded",size:"sm"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"text-sm text-[#c9d1d9] truncate",children:t}),(0,l.jsxs)("div",{className:"text-[10px] text-[#6e7681] mt-0.5 flex gap-2",children:[n&&(0,l.jsxs)("span",{className:"text-purple-400",children:["\uD83D\uDC64 ",n]}),d&&(0,l.jsxs)("span",{children:["\uD83D\uDCC5 ",d]})]})]})]},s)})}):(0,l.jsx)("div",{className:"text-center py-8 text-[#6e7681] text-sm",children:"队列为空"})})]})]}):(0,l.jsxs)(l.Fragment,{children:["board"===N?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:c.map(e=>{let s=S.filter(s=>s.status===e.key);return(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-xl border-t-4 ".concat(e.color," border border-[#30363d] min-h-[300px]"),children:[(0,l.jsxs)("div",{className:"px-4 py-3 border-b border-[#21262d] flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:e.emoji}),(0,l.jsx)("span",{className:"font-semibold text-white text-sm",children:e.label})]}),(0,l.jsx)("span",{className:"bg-[#21262d] text-[#8b949e] text-xs font-medium px-2 py-0.5 rounded-full",children:s.length})]}),(0,l.jsxs)("div",{className:"p-3 space-y-3",children:[s.map(e=>q(e)),0===s.length&&(0,l.jsx)("div",{className:"text-center py-8 text-[#6e7681] text-sm",children:"暂无任务"})]})]},e.key)})}),(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-xl border border-[#30363d]",children:[(0,l.jsxs)("button",{onClick:()=>y(!f),className:"w-full px-4 py-3 flex items-center justify-between border-b border-[#21262d] hover:bg-[#161b22] transition-colors rounded-t-xl",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"✅"}),(0,l.jsx)("span",{className:"font-semibold text-white text-sm",children:"已完成 (归档)"}),(0,l.jsx)("span",{className:"bg-[#21262d] text-[#8b949e] text-xs font-medium px-2 py-0.5 rounded-full",children:Z.length})]}),(0,l.jsx)("span",{className:"text-[#484f58] text-sm",children:f?"▲ 收起":"▼ 展开"})]}),f&&(0,l.jsx)("div",{className:"p-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Z.map(e=>q(e))})]})]}):(0,l.jsxs)("div",{className:"bg-[#0d1117] rounded-xl border border-[#30363d] overflow-hidden",children:[(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-xs",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-[#6e7681] border-b border-[#21262d]",children:[(0,l.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"任务"}),(0,l.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"状态"}),(0,l.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"规划者"}),(0,l.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"执行者"}),(0,l.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"方式"}),(0,l.jsx)("th",{className:"text-right py-3 px-4 font-medium",children:"Token"}),(0,l.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"日期"})]})}),(0,l.jsx)("tbody",{children:S.map(e=>{let s={done:{label:"✅ 完成",color:"text-green-400"},"in-progress":{label:"\uD83D\uDD04 进行中",color:"text-blue-400"},planned:{label:"\uD83D\uDCCB 计划",color:"text-yellow-400"},blocked:{label:"\uD83D\uDEAB 阻塞",color:"text-red-400"}}[e.status];return(0,l.jsxs)("tr",{onClick:()=>A(e.id),className:"border-b border-[#161b22] hover:bg-[#161b22] cursor-pointer transition-colors",children:[(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)("span",{className:"text-white font-medium",children:e.title})}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)("span",{className:s.color,children:s.label})}),(0,l.jsx)("td",{className:"py-3 px-4 text-[#8b949e]",children:e.planner}),(0,l.jsx)("td",{className:"py-3 px-4 text-[#8b949e]",children:e.executor}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsxs)("div",{className:"flex gap-1",children:[e.viaClaudeCode&&(0,l.jsx)("span",{className:"text-[10px] px-1 py-0.5 rounded bg-green-500/10 text-green-400",children:"CC"}),e.viaOpenSpec&&(0,l.jsx)("span",{className:"text-[10px] px-1 py-0.5 rounded bg-cyan-500/10 text-cyan-400",children:"OS"}),!e.viaClaudeCode&&!e.viaOpenSpec&&(0,l.jsx)("span",{className:"text-[10px] px-1 py-0.5 rounded bg-purple-500/10 text-purple-400",children:"直接"})]})}),(0,l.jsx)("td",{className:"py-3 px-4 text-right text-[#6e7681]",children:e.planTokens||e.execTokens?"".concat(i(e.planTokens||0),"/").concat(i(e.execTokens||0)):"-"}),(0,l.jsx)("td",{className:"py-3 px-4 text-[#6e7681]",children:new Date(e.createdAt).toLocaleDateString("zh-CN")})]},e.id)})})]})}),t&&S.find(e=>e.id===t)&&(0,l.jsx)("div",{className:"border-t border-[#30363d] p-4 bg-[#161b22]",children:(()=>{let e=S.find(e=>e.id===t);return e?(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"text-base font-semibold text-white",children:e.title}),(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),j(null)},className:"text-xs text-[#8b949e] hover:text-white bg-[#21262d] border border-[#30363d] px-2 py-1 rounded",children:"✕ 关闭"})]}),e.description&&(0,l.jsx)("p",{className:"text-sm text-[#8b949e] leading-relaxed",children:e.description}),(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-xs",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[#6e7681]",children:"规划者"}),(0,l.jsx)("div",{className:"text-white mt-0.5",children:e.planner})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[#6e7681]",children:"执行者"}),(0,l.jsx)("div",{className:"text-white mt-0.5",children:e.executor})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[#6e7681]",children:"模型"}),(0,l.jsx)("div",{className:"text-white mt-0.5",children:e.model})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[#6e7681]",children:"Token"}),(0,l.jsxs)("div",{className:"text-white mt-0.5",children:[i(e.planTokens||0),"/",i(e.execTokens||0)]})]})]})]}):null})()}),(0,l.jsxs)("div",{className:"border-t border-[#30363d]",children:[(0,l.jsxs)("button",{onClick:()=>y(!f),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-[#161b22] transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"✅"}),(0,l.jsx)("span",{className:"text-sm text-white font-medium",children:"已完成归档"}),(0,l.jsx)("span",{className:"bg-[#21262d] text-[#8b949e] text-xs px-2 py-0.5 rounded-full",children:Z.length})]}),(0,l.jsx)("span",{className:"text-[#484f58] text-sm",children:f?"▲":"▼"})]}),f&&(0,l.jsx)("table",{className:"w-full text-xs",children:(0,l.jsx)("tbody",{children:Z.map(e=>(0,l.jsxs)("tr",{onClick:()=>A(e.id),className:"border-b border-[#161b22] hover:bg-[#161b22] cursor-pointer transition-colors opacity-70",children:[(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)("span",{className:"text-white font-medium",children:e.title})}),(0,l.jsx)("td",{className:"py-3 px-4 text-green-400",children:"✅ 完成"}),(0,l.jsx)("td",{className:"py-3 px-4 text-[#8b949e]",children:e.planner}),(0,l.jsx)("td",{className:"py-3 px-4 text-[#8b949e]",children:e.executor}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsxs)("div",{className:"flex gap-1",children:[e.viaClaudeCode&&(0,l.jsx)("span",{className:"text-[10px] px-1 py-0.5 rounded bg-green-500/10 text-green-400",children:"CC"}),!e.viaClaudeCode&&(0,l.jsx)("span",{className:"text-[10px] px-1 py-0.5 rounded bg-purple-500/10 text-purple-400",children:"直接"})]})}),(0,l.jsxs)("td",{className:"py-3 px-4 text-right text-[#6e7681]",children:[i(e.planTokens||0),"/",i(e.execTokens||0)]}),(0,l.jsx)("td",{className:"py-3 px-4 text-[#6e7681]",children:e.completedAt?new Date(e.completedAt).toLocaleDateString("zh-CN"):"-"})]},e.id))})})]})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)("button",{onClick:()=>v("board"),className:"text-xs px-3 py-1.5 rounded-lg border transition-colors ".concat("board"===N?"bg-purple-500/20 border-purple-500/50 text-purple-400":"bg-[#21262d] border-[#30363d] text-[#8b949e] hover:text-white"),children:"看板"}),(0,l.jsx)("button",{onClick:()=>v("list"),className:"text-xs px-3 py-1.5 rounded-lg border transition-colors ".concat("list"===N?"bg-purple-500/20 border-purple-500/50 text-purple-400":"bg-[#21262d] border-[#30363d] text-[#8b949e] hover:text-white"),children:"列表"})]})]})]})}},7764:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var l=t(7437);function n(e){let{status:s,pulse:t=!0,size:n="sm"}=e;return(0,l.jsx)("span",{className:"inline-block rounded-full ".concat("md"===n?"w-3 h-3":"w-2 h-2"," ").concat(s&&({healthy:"bg-green-500",success:"bg-green-500",active:"bg-green-500",degraded:"bg-yellow-500",timeout:"bg-yellow-500",down:"bg-red-500",failed:"bg-red-500",disabled:"bg-gray-500"})[s]||"bg-gray-500"," ").concat(t&&"disabled"!==s?"status-dot-pulse":"")})}},5940:function(e,s,t){"use strict";t.d(s,{N:function(){return l}});let l=[{id:"task-done-01",title:"搞钱看板 v1-v5 开发部署",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:15e3,execTokens:8e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["browser","exec","vercel"],description:"从零搭建搞钱看板，经历 v1 到 v5 五个大版本迭代。包括总览仪表盘、任务看板、模型监控、订阅服务等页面。接入真实数据源 stats.json，部署到 Vercel。",subtasks:[{id:"st-01-1",title:"v1: 基础框架 + 静态页面",done:!0},{id:"st-01-2",title:"v2: 拖拽看板 + 暗色主题",done:!0},{id:"st-01-3",title:"v3: 真实数据接入 stats.json",done:!0},{id:"st-01-4",title:"v4: 模型监控 + 费用统计",done:!0},{id:"st-01-5",title:"v5: 订阅服务 + 智谱/Claude配额",done:!0}],createdAt:"2026-02-10T08:00:00Z",completedAt:"2026-02-17T12:00:00Z",archived:!0},{id:"task-done-02",title:"备婚手册文档 v1-v4",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:1e4,execTokens:12e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["feishu_doc","browser","image"],description:"在飞书上创建完整的备婚手册文档，包含婚礼筹备时间线、预算表、供应商对比、宾客管理等内容。经历4个版本迭代优化。",subtasks:[{id:"st-02-1",title:"v1: 基础框架和时间线",done:!0},{id:"st-02-2",title:"v2: 预算表 + 供应商对比",done:!0},{id:"st-02-3",title:"v3: 宾客管理 + 座位安排",done:!0},{id:"st-02-4",title:"v4: 最终版本完善",done:!0}],createdAt:"2026-01-10T08:00:00Z",completedAt:"2026-02-15T18:00:00Z",archived:!0},{id:"task-done-03",title:"PainRadar 商机雷达",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)+Opus",planTokens:2e4,execTokens:2e5,viaClaudeCode:!0,viaOpenSpec:!1,model:"GLM-5 + Claude Opus 4.6",tools:["exec","ssh","mysql"],description:"用户痛点自动抓取与分析系统。从 Reddit、x.com 等平台抓取用户抱怨和需求，用 AI 分析商机。部署在 spaceship 服务器上。",subtasks:[{id:"st-03-1",title:"爬虫模块开发",done:!0},{id:"st-03-2",title:"AI 分析管道",done:!0},{id:"st-03-3",title:"MySQL 数据存储",done:!0},{id:"st-03-4",title:"前端展示页面",done:!0}],createdAt:"2026-01-20T08:00:00Z",completedAt:"2026-02-14T16:00:00Z",archived:!0},{id:"task-done-04",title:"飞书群聊互动（周杨式家族大群）",status:"done",priority:"中",planner:"搞钱大王",executor:"Opus",planTokens:2e3,execTokens:3e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["browser","feishu"],description:"在飞书家族群中与家人互动，包括发送消息、回复问题、分享有趣内容等。",createdAt:"2026-02-01T08:00:00Z",completedAt:"2026-02-16T20:00:00Z",archived:!0},{id:"task-done-05",title:"飞书账号注册 + 登录",status:"done",priority:"中",planner:"搞钱大王",executor:"Opus",planTokens:1e3,execTokens:5e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["browser"],description:"通过浏览器自动化完成飞书账号注册和登录流程。",createdAt:"2026-01-28T08:00:00Z",completedAt:"2026-01-29T10:00:00Z",archived:!0},{id:"task-done-06",title:"Claude Code Hooks 配置",status:"done",priority:"中",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:8e3,execTokens:25e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","write"],description:"配置 Claude Code 的 hooks 系统，实现自动化工作流。包括 pre-commit、post-session 等钩子。",createdAt:"2026-02-05T08:00:00Z",completedAt:"2026-02-06T14:00:00Z",archived:!0},{id:"task-done-07",title:"Stats Collector 数据管道",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:1e4,execTokens:3e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","ssh"],description:"搭建 OpenClaw 会话数据采集管道。扫描 session JSONL 文件，聚合模型调用统计，生成 stats.json 供看板消费。",subtasks:[{id:"st-07-1",title:"JSONL 解析器",done:!0},{id:"st-07-2",title:"模型统计聚合",done:!0},{id:"st-07-3",title:"定时执行 cron",done:!0},{id:"st-07-4",title:"上传到 spaceship",done:!0}],createdAt:"2026-02-08T08:00:00Z",completedAt:"2026-02-12T16:00:00Z",archived:!0},{id:"task-done-08",title:"备婚管理网站",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:8e3,execTokens:1e5,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","vercel","git"],description:"独立的备婚管理网站，支持时间线管理、待办事项、预算追踪等功能。部署在 Vercel 上。",createdAt:"2026-01-15T08:00:00Z",completedAt:"2026-02-01T18:00:00Z",archived:!0},{id:"task-done-09",title:"主备大脑切换系统",status:"done",priority:"高",planner:"瓦力(Opus)",executor:"Opus",planTokens:1e4,execTokens:4e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","write"],description:"实现 Claude Opus 和 CoCo (MiniMax) 之间的主备自动切换。当主脑限流时自动切换到备用大脑，恢复后自动切回。",createdAt:"2026-01-12T08:00:00Z",completedAt:"2026-01-18T14:00:00Z",archived:!0},{id:"task-done-10",title:"OpenSpec-bg Skill 创建",status:"done",priority:"中",planner:"瓦力(Opus)",executor:"Opus",planTokens:5e3,execTokens:2e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","write"],description:"创建 openspec-bg skill，支持 Claude Code 后台任务执行。",createdAt:"2026-01-18T08:00:00Z",completedAt:"2026-01-22T12:00:00Z",archived:!0},{id:"task-done-11",title:"Lark Manager Skill",status:"done",priority:"中",planner:"瓦力(Opus)",executor:"Opus",planTokens:5e3,execTokens:15e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec","write"],description:"创建飞书文档 API 管理 skill，封装飞书开放平台 API 调用。",createdAt:"2026-01-20T08:00:00Z",completedAt:"2026-01-25T10:00:00Z",archived:!0},{id:"task-done-12",title:"每日商业报告",status:"done",priority:"中",planner:"瓦力(Opus)",executor:"Opus",planTokens:3e3,execTokens:1e4,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["feishu_doc"],description:"自动生成每日商业报告文档，包含市场动态、竞品分析、机会识别等内容，推送到飞书。",createdAt:"2026-02-01T08:00:00Z",completedAt:"2026-02-10T18:00:00Z",archived:!0},{id:"task-done-13",title:"小红书 MCP 下载",status:"done",priority:"低",planner:"瓦力(Opus)",executor:"Sub-Agent(Opus)",planTokens:2e3,execTokens:5e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["exec"],description:"下载并配置小红书 MCP (Model Context Protocol) 工具。",createdAt:"2026-02-12T08:00:00Z",completedAt:"2026-02-12T14:00:00Z",archived:!0},{id:"task-done-14",title:"飞书日历创建",status:"done",priority:"中",planner:"搞钱大王",executor:"Opus",planTokens:1e3,execTokens:8e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["feishu_api"],description:"通过飞书 API 创建共享日历，用于备婚时间线管理和重要日期提醒。",createdAt:"2026-02-05T08:00:00Z",completedAt:"2026-02-07T12:00:00Z",archived:!0},{id:"task-wip-01",title:"Claude.ai 用量抓取",status:"blocked",priority:"高",planner:"瓦力(Opus)",executor:"Opus",planTokens:5e3,execTokens:15e3,viaClaudeCode:!1,viaOpenSpec:!1,model:"Claude Opus 4.6",tools:["browser"],description:"从 Claude.ai 网页端抓取真实用量数据。目前被 Cloudflare 防护阻拦，需要寻找替代方案。",subtasks:[{id:"st-wip01-1",title:"浏览器自动化登录",done:!0},{id:"st-wip01-2",title:"绕过 Cloudflare",done:!1},{id:"st-wip01-3",title:"用量数据解析",done:!1}],createdAt:"2026-02-14T08:00:00Z"},{id:"task-wip-02",title:"搞钱计划 — 用户痛点挖掘",status:"in-progress",priority:"高",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",planTokens:1e4,execTokens:5e4,viaClaudeCode:!0,viaOpenSpec:!0,model:"GLM-5",tools:["exec","web_search"],description:"在 x.com 和 Reddit 上挖掘用户痛点，分析哪些可以做成付费产品。",openspecChange:"painradar-scraper",openspecProposal:"## 提案：用户痛点自动挖掘系统\n\n### 目标\n从 Reddit、x.com、Hacker News 等平台自动抓取用户抱怨和需求，\n用 AI 分析商机，生成可行性报告。\n\n### 技术方案\n- 爬虫：HTTP + 代理池\n- AI 分析：GLM-5 批量评分\n- 输出：JSON → 前端看板",openspecTasks:"- [x] Reddit 痛点抓取模块\n- [ ] x.com 痛点抓取（需代理）\n- [ ] Hacker News 抓取\n- [ ] AI 评分管道（GLM-5）\n- [ ] 商机排序输出",subtasks:[{id:"st-wip02-1",title:"Reddit 痛点抓取",done:!0},{id:"st-wip02-2",title:"x.com 痛点抓取",done:!1},{id:"st-wip02-3",title:"商机评分排序",done:!1}],createdAt:"2026-02-10T08:00:00Z"},{id:"task-wip-03",title:"支付链路 Creem/Wise",status:"in-progress",priority:"高",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",planTokens:5e3,execTokens:3e4,viaClaudeCode:!0,viaOpenSpec:!0,model:"GLM-5",tools:["exec"],description:"打通海外支付链路，对接 Creem 支付和 Wise 收款，为未来产品收费做准备。",openspecChange:"payment-integration",openspecProposal:"## 提案：海外支付链路\n\n### 目标\n集成 Creem 支付网关 + Wise 多币种收款，\n让 AI Tools 产品能接受全球付款。\n\n### 技术方案\n- Creem SDK 集成\n- Webhook 回调处理\n- Wise API 自动提现",openspecTasks:"- [x] Creem SDK 集成\n- [x] 支付回调 webhook\n- [ ] Wise API 自动提现\n- [ ] 订单管理页面\n- [ ] 退款流程",createdAt:"2026-02-11T08:00:00Z"},{id:"task-wip-04",title:"小说《青云路》写作",status:"in-progress",priority:"低",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",planTokens:15e3,execTokens:1e5,viaClaudeCode:!0,viaOpenSpec:!1,model:"GLM-5",tools:["write"],description:"网络小说《青云路》的创作，由 Claude Code + GLM-5 负责内容生成。",createdAt:"2026-02-05T08:00:00Z"},{id:"task-wip-05",title:"Skills 管理看板",status:"in-progress",priority:"中",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",planTokens:5e3,execTokens:3e4,viaClaudeCode:!0,viaOpenSpec:!1,model:"GLM-5",tools:["exec","write"],description:"在搞钱看板中新增 Skills 管理页面，展示所有已安装和内置的 skills。",createdAt:"2026-02-16T08:00:00Z"},{id:"task-plan-01",title:"AI Tools 独立产品上线",status:"planned",priority:"高",planner:"瓦力(Opus)",executor:"OpenSpec-bg(GLM-5)",viaClaudeCode:!0,viaOpenSpec:!0,model:"GLM-5",tools:["exec","vercel"],description:"将 AI 工具集打包成独立产品上线。超大项目，交给 OpenSpec-bg 管理多任务循环执行。",openspecChange:"ai-tools-product",openspecProposal:"## 提案：AI Tools 独立产品\n\n### 目标\n打造一个面向普通用户的 AI 工具集网站，\n集成多个实用工具（文本/图片/代码），收费 $9.9/月。\n\n### 技术方案\n- Next.js + Tailwind\n- Creem 支付\n- 部署 Vercel\n- GLM-5 作为后端 AI",openspecTasks:"- [ ] 项目脚手架搭建\n- [ ] 工具1: AI 文本改写\n- [ ] 工具2: 代码解释器\n- [ ] 工具3: 图片描述生成\n- [ ] 支付集成\n- [ ] 用户系统\n- [ ] 部署上线",createdAt:"2026-02-15T08:00:00Z"},{id:"task-plan-02",title:"周报 cron 自动化",status:"planned",priority:"中",planner:"瓦力(Opus)",executor:"GLM-5 子agent",viaClaudeCode:!1,viaOpenSpec:!1,model:"GLM-5",tools:["cron","feishu_doc"],description:"自动化生成每周周报，汇总本周完成的任务、费用统计、下周计划等。非多模态任务，分配给 GLM-5 子agent。",createdAt:"2026-02-16T08:00:00Z"},{id:"task-plan-03",title:"飞书文档 API 长文写入修复",status:"planned",priority:"中",planner:"瓦力(Opus)",executor:"Claude Code(GLM-5)",viaClaudeCode:!0,viaOpenSpec:!1,model:"GLM-5",tools:["exec","write"],description:"修复飞书文档 API 在写入长文本时的分块问题。编码任务优先分配 Claude Code。",createdAt:"2026-02-17T08:00:00Z"}]},1837:function(e,s,t){"use strict";async function l(){try{let e="?t=".concat(Date.now()),s=await fetch("".concat("https://junaitools.com/wali-api","/stats.json").concat(e),{cache:"no-store",signal:AbortSignal.timeout(8e3)});if(!s.ok)throw Error("Failed to fetch");return await s.json()}catch(e){return null}}t.d(s,{m:function(){return l}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3398)}),_N_E=e.O()}]);