(()=>{var e={};e.id=192,e.ids=[192],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2656:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>c}),t(3771),t(9454),t(5866);var a=t(3191),n=t(8716),r=t(7922),l=t.n(r),i=t(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["crons",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3771)),"/data00/home/zhoujun.sandbar/workspace/wali-dashboard/src/app/crons/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9454)),"/data00/home/zhoujun.sandbar/workspace/wali-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/data00/home/zhoujun.sandbar/workspace/wali-dashboard/src/app/crons/page.tsx"],u="/crons/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/crons/page",pathname:"/crons",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9041:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},4354:(e,s,t)=>{Promise.resolve().then(t.bind(t,998))},5303:()=>{},998:(e,s,t)=>{"use strict";t.d(s,{default:()=>d});var a=t(326),n=t(434),r=t(5047),l=t(7577);let i=[{href:"/",label:"总览",icon:"\uD83D\uDCCA"},{href:"/tasks",label:"任务看板",icon:"\uD83D\uDCCB"},{href:"/models",label:"模型监控",icon:"\uD83E\uDDE0"},{href:"/skills",label:"Skills",icon:"\uD83E\uDDE9"},{href:"/crons",label:"Cron任务",icon:"⏰"},{href:"/subscriptions",label:"订阅服务",icon:"\uD83D\uDCB3"}];function d(){let e=(0,r.usePathname)(),[s,t]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>c(!d),className:"fixed top-4 left-4 z-50 md:hidden bg-[#21262d] border border-[#30363d] rounded-lg p-2 text-xl",children:d?"✕":"☰"}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>c(!1)}),(0,a.jsxs)("aside",{className:`
          fixed top-0 left-0 h-full z-40 bg-[#161b22] border-r border-[#30363d]
          flex flex-col transition-all duration-300 ease-in-out
          ${s?"w-16":"w-60"}
          ${d?"translate-x-0":"-translate-x-full"}
          md:translate-x-0 md:relative
        `,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 h-16 border-b border-[#30363d] shrink-0",children:[!s&&(0,a.jsxs)(n.default,{href:"/",className:"flex items-center gap-2 text-lg font-bold text-white whitespace-nowrap",children:[a.jsx("span",{className:"text-2xl",children:"\uD83E\uDD16"}),a.jsx("span",{children:"瓦力控制台"})]}),s&&a.jsx(n.default,{href:"/",className:"text-2xl mx-auto",children:"\uD83E\uDD16"}),a.jsx("button",{onClick:()=>t(!s),className:"hidden md:block text-[#8b949e] hover:text-white text-sm ml-2",title:s?"展开":"收起",children:s?"→":"←"})]}),a.jsx("nav",{className:"flex-1 py-4 overflow-y-auto",children:i.map(t=>{let r=e===t.href;return(0,a.jsxs)(n.default,{href:t.href,onClick:()=>c(!1),className:`
                  flex items-center gap-3 mx-2 px-3 py-2.5 rounded-lg text-sm font-medium
                  transition-colors duration-150
                  ${r?"bg-[#21262d] text-white border border-[#30363d]":"text-[#8b949e] hover:text-white hover:bg-[#21262d]"}
                  ${s?"justify-center":""}
                `,children:[a.jsx("span",{className:"text-lg",children:t.icon}),!s&&a.jsx("span",{children:t.label})]},t.href)})}),(0,a.jsxs)("div",{className:"px-4 py-3 border-t border-[#30363d] text-xs text-[#6e7681] shrink-0",children:[!s&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 status-dot-pulse"}),a.jsx("span",{children:"系统运行中"})]}),s&&a.jsx("div",{className:"flex justify-center",children:a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 status-dot-pulse"})})]})]})]})}},3771:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(9510);function n({children:e,className:s="",hover:t=!0,style:n}){return a.jsx("div",{className:`
        bg-[#161b22] border border-[#30363d] rounded-xl p-5
        ${t?"card-hover":""}
        ${s}
      `,style:n,children:e})}function r({status:e,pulse:s=!0,size:t="sm"}){return a.jsx("span",{className:`inline-block rounded-full ${"md"===t?"w-3 h-3":"w-2 h-2"} ${e&&({healthy:"bg-green-500",success:"bg-green-500",active:"bg-green-500",degraded:"bg-yellow-500",timeout:"bg-yellow-500",down:"bg-red-500",failed:"bg-red-500",disabled:"bg-gray-500"})[e]||"bg-gray-500"} ${s&&"disabled"!==e?"status-dot-pulse":""}`})}var l=t(4088);function i(){let e=l.h.filter(e=>e.enabled).length,s=l.h.filter(e=>e.consecutiveFailures>0).length;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"⏰ Cron 任务"}),(0,a.jsxs)("p",{className:"text-sm text-[#8b949e] mt-1",children:["共 ",l.h.length," 个任务 \xb7 ",e," 个启用 \xb7 ",s>0&&(0,a.jsxs)("span",{className:"text-red-400",children:[s," 个异常"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,a.jsxs)(n,{children:[a.jsx("div",{className:"text-xs text-[#8b949e] uppercase tracking-wider",children:"总任务"}),a.jsx("div",{className:"text-2xl font-bold text-white mt-1",children:l.h.length})]}),(0,a.jsxs)(n,{children:[a.jsx("div",{className:"text-xs text-[#8b949e] uppercase tracking-wider",children:"已启用"}),a.jsx("div",{className:"text-2xl font-bold text-green-400 mt-1",children:e})]}),(0,a.jsxs)(n,{children:[a.jsx("div",{className:"text-xs text-[#8b949e] uppercase tracking-wider",children:"已禁用"}),a.jsx("div",{className:"text-2xl font-bold text-gray-400 mt-1",children:l.h.length-e})]}),(0,a.jsxs)(n,{children:[a.jsx("div",{className:"text-xs text-[#8b949e] uppercase tracking-wider",children:"异常"}),a.jsx("div",{className:"text-2xl font-bold text-red-400 mt-1",children:s})]})]}),a.jsx("div",{className:"space-y-3",children:l.h.map(e=>{var s;return a.jsx(n,{className:`${e.enabled?"":"opacity-60"}`,children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(r,{status:e.enabled?e.consecutiveFailures>0?"failed":"active":"disabled",size:"md"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-sm font-semibold text-white truncate",children:e.name}),!e.enabled&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gray-500/10 text-gray-400 border border-gray-500/30 shrink-0",children:"已禁用"}),e.consecutiveFailures>0&&(0,a.jsxs)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-500/10 text-red-400 border border-red-500/30 shrink-0",children:["连续",e.consecutiveFailures,"次失败"]})]}),(0,a.jsxs)("div",{className:"text-xs text-[#6e7681] mt-0.5 flex items-center gap-3",children:[a.jsx("span",{className:"font-mono bg-[#21262d] px-1.5 py-0.5 rounded",children:e.schedule}),a.jsx("span",{children:function(e){let s=e.split(" ");if(s.length<5)return e;let[t,a,n,r,l]=s;return"*"===n&&"*"===r&&"*"===l?t.startsWith("*/")?`每${t.slice(2)}分钟`:`每天 ${a.padStart(2,"0")}:${t.padStart(2,"0")}`:e}(e.schedule)}),e.note&&(0,a.jsxs)("span",{className:"text-[#8b949e] italic",children:["(",e.note,")"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 sm:gap-8 text-xs shrink-0 pl-8 sm:pl-0",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-[#6e7681] mb-0.5",children:"上次运行"}),a.jsx("div",{className:"text-[#8b949e]",children:e.lastRun?new Date(e.lastRun).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-[#6e7681] mb-0.5",children:"状态"}),a.jsx("div",{className:"success"===e.lastStatus?"text-green-400":"failed"===e.lastStatus?"text-red-400":"timeout"===e.lastStatus?"text-yellow-400":"text-[#8b949e]",children:"success"===e.lastStatus?"✓ 成功":"failed"===e.lastStatus?"✕ 失败":"timeout"===e.lastStatus?"⏱ 超时":"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-[#6e7681] mb-0.5",children:"耗时"}),a.jsx("div",{className:"text-[#8b949e]",children:e.lastDuration?(s=e.lastDuration)>=60?`${Math.floor(s/60)}m ${s%60}s`:`${s}s`:"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-[#6e7681] mb-0.5",children:"下次运行"}),a.jsx("div",{className:"text-[#8b949e]",children:"-"!==e.nextRun?new Date(e.nextRun).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]})]})]})},e.id)})})]})}},9454:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>r});var a=t(9510);t(5023);let n=(0,t(8570).createProxy)(String.raw`/data00/home/zhoujun.sandbar/workspace/wali-dashboard/src/components/Sidebar.tsx#default`),r={title:"瓦力控制台 - 搞钱看板",description:"AI Agent 运营监控仪表盘"};function l({children:e}){return a.jsx("html",{lang:"zh-CN",children:(0,a.jsxs)("body",{className:"flex min-h-screen",children:[a.jsx(n,{}),a.jsx("main",{className:"flex-1 min-h-screen overflow-auto md:ml-0",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16 md:pt-8",children:e})})]})})}},4088:(e,s,t)=>{"use strict";t.d(s,{h:()=>a});let a=[{id:"cron-01",name:"morning-opportunity-report",schedule:"0 8 * * *",enabled:!0,lastRun:"2025-02-17T08:00:12Z",lastStatus:"success",lastDuration:45,consecutiveFailures:0,nextRun:"2025-02-18T08:00:00Z"},{id:"cron-02",name:"daily-skill-upgrade",schedule:"10 1 * * *",enabled:!0,lastRun:"2025-02-17T01:10:05Z",lastStatus:"success",lastDuration:120,consecutiveFailures:0,nextRun:"2025-02-18T01:10:00Z"},{id:"cron-03",name:"daily-memory-sync",schedule:"15 1 * * *",enabled:!0,lastRun:"2025-02-17T01:15:03Z",lastStatus:"success",lastDuration:30,consecutiveFailures:0,nextRun:"2025-02-18T01:15:00Z"},{id:"cron-04",name:"备婚任务超期检查",schedule:"0 9 * * *",enabled:!0,lastRun:"2025-02-17T09:00:08Z",lastStatus:"success",lastDuration:15,consecutiveFailures:0,nextRun:"2025-02-18T09:00:00Z"},{id:"cron-05",name:"PainRadar Daily",schedule:"0 9 * * *",enabled:!0,lastRun:"2025-02-17T09:00:22Z",lastStatus:"success",lastDuration:180,consecutiveFailures:0,nextRun:"2025-02-18T09:00:00Z"},{id:"cron-06",name:"每日更新待办清单",schedule:"30 9 * * *",enabled:!0,lastRun:"2025-02-17T09:30:05Z",lastStatus:"timeout",lastDuration:300,consecutiveFailures:2,nextRun:"2025-02-18T09:30:00Z",note:"最近2次超时失败"},{id:"cron-07",name:"飞书群聊监控",schedule:"*/5 * * * *",enabled:!1,lastRun:"2025-02-10T12:05:00Z",lastStatus:"success",lastDuration:5,consecutiveFailures:0,nextRun:"-"},{id:"cron-08",name:"搞钱军火库每日更新",schedule:"0 10 * * *",enabled:!1,lastRun:"2025-02-08T10:00:00Z",lastStatus:"success",lastDuration:60,consecutiveFailures:0,nextRun:"-",note:"已整合到PainRadar"}]},5023:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,982],()=>t(2656));module.exports=a})();